{"openapi":"3.0.2","info":{"title":"Privacy Hero 2 - Mothership","description":"\nThe Privacy Hero 2 Backend, also known as the \"Mothership\".\n\nRevision = Unknown Revision\n\nThis document describes:\n1. The Rest API used by the Front end.\n2. The admin API used for administrator functions.\n3. The API used by the Chargebee Callback.\n4. The API used by the Webbrowser plugin.\n5. The API used by the Routers over the Websocket connection.\n","version":"Unknown Tag"},"paths":{"/v1/auth/newcustomer":{"post":{"tags":["Account Management"],"summary":"Request New Customer/Forgotten Password/Passwordless Re-authentication","description":"\n# Usage\n\nIf the email address supplied in the message is not registered in the\nsystem, then this message is processed as a \"New Customer Registration\".\nOverwise this messages is processed as an \"Existing Customer forgot\npassword\"/\"Existing Customer needs passwordless re-authentication\" request.\n\nThe ONLY difference in the processing is the form of the email which is sent\nto the customer.  Either acknowledging their request for a new account, OR\nacknowledging their request to change their password.\n\nUpon receipt of this message, an email will be sent to the supplied email\naddress.  It will contain instructions to click a provided link in the\nmessage which will act as a callback to the initiating application.\n\nThe URL passed as the callback must be able to accept two parameter in the\nurl of the form:\n\n```\ncallback.url/path?verify=<token>&exp=<time>\n```\n\n- **verify** is the verification token to be sent back to the API server by\n  the app on the **/v1/auth/confirmcustomer** call.\n- **exp** specifies when the verification token will expire.  Any call to\n  **/v1/auth/confirmcustomer**` after this time will fail.\n\nUpon receipt of the callback, if the application uses passwords, it should\nprompt for a new password, and then send that in the `confirmcustomer`\nmessage.  Otherwise, the app should just immediately send the\n`confirmcustomer` message to the backend, which will then provide\nauthentication tokens allowing the application/client access to the rest of\nthe API.\n\n## Security Requirements\n\nThe Authorization Bearer token sent to authenticate for this message is the\nApplication unique and pre-distributed App Token.\n\n## Parameters\n\n- **email**: The email address the customer wants the Account email to be\n  directed to.\n- **callback**: The complete URL, minus parameters, which is embedded in the\n    email sent to the customer to confirm their account creation. It must\n    point to the app which instigated this request.\n\n## Message Flow Diagrams\n\n- See: [New Customer Message Flow](./API/flows/NewCustomer-Flow.html)\n- See: [Forgot Password Message Flow](./API/flows/ForgotPassword-Flow.html)\n","operationId":"new_customer_v1_auth_newcustomer_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/NewcustomerBody"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPAppBearerToken":[]}]}},"/v1/auth/confirmcustomer":{"post":{"tags":["Account Management"],"summary":"Confirm the Customer Account Maintenance Request","description":"\n# Usage\n\nConfirms creation of the new account for a Customer, via the back link\nprovided by the email to the customer.\n\n## Security Requirements\n\nThe Authorization Bearer token sent to authenticate for this message is the\nApplication unique and pre-distributed App Token.\n\n## Parameters\n\n- **verify**: The token passed to the callback which invoked this API call.\n- **pwd**: The clients chosen password.  This should only be provided if the\n  callback specified that a password was required.\n- **expchk**: Token Expiry Check.  Will not execute the confirmation,\n  instead will reply with a 202 IF the operation would have succeeded. The\n  backend will not do any updates if expchk is set, so, for confirmations\n  that require a password, the **pwd** field should be set with a valid\n  placeholder.\n","operationId":"confirm_customer_v1_auth_confirmcustomer_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConfirmCustomerBody"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Authorized"}}}},"202":{"description":"Accepted","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExpChkResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPAppBearerToken":[]}]}},"/v1/auth/login":{"post":{"tags":["Account Management"],"summary":"Login the Client","description":"\n# Usage\n\nLogs a client/admin in to their account, by validating their credentials and\nreturning a Bearer token for API access.\nCan also be used by an admin to impersonate the login of a client.\n\nThis API call is only made for applications that use a password for\nauthorization validation. Other applications need to do account recovery if\nthe access token is lost or expired.\n\n## Security Requirements\n\nFor a normal client/admin login, the Authorization Bearer token sent to\nauthenticate for this message is the Application unique and pre-distributed\nApp Token.\n\nHowever, if the client is an Admin user, this message can be called to\nimpersonate a non admin client. In this case the Authorization Bearer token\nmust be the Admins Authorization Bearer token AND the password in the\nmessage must be the Administrators password.\n\n## Parameters\n\n- **id**: The clients ID, different clients will present different ID.\n    * Customer: Their email address.\n    * Admin: Their email address.\n    * Impersonation: The email address of the client the\n    administrator wishes to impersonate.\n- **pwd**: The shared secret used to identify the client. This is the\nClients or Administrators password. However, in the case of Impersonation,\nthis password MUST be the administrators password and it must match the\nadministrator identified by their Authorization Bearer Token. It is sent\nunencrypted/unhashed because the link is protected from eaves dropping\nwith https. Admins can ONLY log in through this call.\n","operationId":"login_endpoint_v1_auth_login_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginBody"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Authorized"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPAppBearerToken":[]},{"HTTPUserBearerToken":[]}]}},"/v1/auth/renew":{"get":{"tags":["Account Management"],"summary":"Renew a Client Authorization Token.","description":"\n# Usage\n\nWhen the Clients Authorization Token is about to (or already has)\nreached its expiry time.  This call is made to provide a new token for\ncontinued use of the API without requiring account recover.  If the\ntoken has finally passed its \"refresh by\" time, account recovery will\nbe required to generate a new fresh Token.\n\nCauses the Authorization token attached to the API call\nto be renewed, and a new token returned.\n","operationId":"renew_endpoint_v1_auth_renew_get","parameters":[{"description":"\nThe applications API Key. Must be the same application the client\nauthorized on or logged in with. This prevents anyone in possession of\nthe clients JWT Token, from renewing it without also having access to a\nmatching Application API Key.\n","required":true,"schema":{"title":"The applications API Key.","maxLength":1024,"minLength":64,"pattern":"^([A-Za-z0-9-_])+\\.([A-Za-z0-9-_])+(\\.[A-Za-z0-9-_]+)?$","type":"string","description":"\nThe applications API Key. Must be the same application the client\nauthorized on or logged in with. This prevents anyone in possession of\nthe clients JWT Token, from renewing it without also having access to a\nmatching Application API Key.\n"},"name":"key","in":"query"}],"responses":{"200":{"description":"\nThis response contains the clients credentials to use on subsequent API\ncalls relating to the client.  These credentials uniquely identify the\nclient and their account.\n\n- **bearer**: The Client Authorization Bearer token required to be sent\n  in the **Authorization: Bearer** header of all API calls that are\n  called on behalf of the Client.\n- **renew**: The Epoch Time, at which user access will expire with this\n  token. Renew before this time, for uninterrupted access.  Renewal may\n  occur up until **exp** time.\n- **exp**: The Epoch Time, at which the token will completely expire and\n  may not be used for renewal.  After this time the user must\n  re-authenticate to get a new bearer token.\n- **admin**: Present only when the logged in client is an admin user,\n  and set to True.  It is not present when Admin is logged in as a\n  client (impersonating the client).\n- **impersonator**: Present only when this client is being impersonated\n  by an administrator. It is the email address of the admin user\n  performing the impersonation.  Note, in all other regards this login\n  is to be treated like a standard client login.\n","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Authorized"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPUserBearerToken":[]}]}},"/v1/auth/chgpwd":{"post":{"tags":["Account Management"],"summary":"Change a Clients password.","description":"\n # Usage\n\nCauses the Clients password to be changed.\n\n ## Parameters\n\n - **old**: The old password of the Client. Must be Valid.\n - **new**: The new password of the Client.\n","operationId":"change_password_v1_auth_chgpwd_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChgpwdBody"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Authorized"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPUserBearerToken":[]}]}},"/v1/auth/chgemail":{"post":{"tags":["Account Management"],"summary":"Change a Clients email address","description":"\n# Usage\n\nCauses the Clients Email Address to be changed. Will also cause an email to\nbe sent to both the old email address, advising the client it is being\nchanged. AND, to the new email address to confirm the address is valid.\n\nThe Confirmation Email contains the callback as an embedded link which will\ncall back into the initiating application.\n\nThe URL passed as the callback must be able to accept three parameter in\nthe url of the form:\n\n```\ncallback.url/path?verify=<token>&pw=<false/true>&exp=<time>\n```\n\n- **verify** is the verification token to be sent back to the API server by\n  the app on the **/v1/auth/confirmcustomer** call.\n- **exp** specifies that a confirmation password must be prompted from the\n  Client, and supplied to the API in the\n  **/v1/auth/confirmcustomer**` call.\n\n## Parameters\n\n- **email**: The email address the customer wants the Account email to be\n  directed to.\n- **callback**: The complete URL, minus parameters, which is embedded in the\n    email sent to the customer to confirm their account creation. It must\n    point to the app which instigated this request.\n\n","operationId":"change_email_v1_auth_chgemail_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChgemailBody"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPUserBearerToken":[]}]}},"/v1/auth/delcustomer":{"post":{"tags":["Account Management"],"summary":"Request to delete customer account","description":"\n# Usage\n\nCauses the Client account to be deleted. Will cause an email to\nbe sent to their email address, advising the client it is being\ndeleted.\n\nThe Confirmation Email contains the callback as an embedded link which will\ncall back into the initiating application.\n\nThe URL passed as the callback must be able to accept three parameter in\nthe url of the form:\n\n```\ncallback.url/path?verify=<token>&pw=<false/true>&exp=<time>\n```\n\n- **verify** is the verification token to be sent back to the API server by\n  the app on the **/v1/auth/confirmcustomer** call.\n- **exp** specifies that a confirmation password must be prompted from the\n  Client, and supplied to the API in the\n  **/v1/auth/confirmcustomer**` call.\n\n## Parameters\n\n- **email**: The email address the customer wants the Account email to be\n  directed to.\n- **callback**: The complete URL, minus parameters, which is embedded in the\n    email sent to the customer to confirm their account creation. It must\n    point to the app which instigated this request.\n\n","operationId":"delete_customer_v1_auth_delcustomer_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DelcustomerBody"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DelcustomerResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPUserBearerToken":[]}]}},"/v1/client/notify":{"post":{"tags":["Client Management"],"summary":"Client Notify","description":"Allows the client to subscribe/unsubscribe web push notifications.","operationId":"client_notify_v1_client_notify_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPUserBearerToken":[]}]}},"/v1/client/send":{"post":{"tags":["Client Management"],"summary":"Client Claim","description":"Allows the client to send all configured notifications.\n\nfor the client the json payload sent to this end point.","operationId":"client_claim_v1_client_send_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPUserBearerToken":[]}]}},"/v1/client/chargebee":{"post":{"tags":["Client Management"],"summary":"Client Chargebee","description":"Allows the front end applications to manage a portal session for the client.\n\nWithout needing to store the security tokens for general chargebee access.","operationId":"client_chargebee_v1_client_chargebee_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPUserBearerToken":[]}]}},"/v1/client/subscriptions":{"get":{"tags":["Client Management"],"summary":"Client Subscriptions","description":"Returns a list of all current subscriptions.\n\nTheir state and the adapter they are associated with, if any. The ID of any\nadapter that does not have a subscription is also returned.","operationId":"client_subscriptions_v1_client_subscriptions_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPUserBearerToken":[]}]}},"/v1/client/motd":{"get":{"tags":["Client Management"],"summary":"Client Motd","description":"Supply parameters which can customize the MOTD response.\n\nand then retrieve the list of all MOTD messages to be presented to the\ncustomer.","operationId":"client_motd_v1_client_motd_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPUserBearerToken":[]}]}},"/v1/client/carousel":{"get":{"tags":["Client Management"],"summary":"Client Carousel Get","description":"Called whenever the Carousel needs refreshing.\n\nTo determine how many carousel pages exist, their order, and the timing\nbetween auto scrolling.","operationId":"client_carousel_get_v1_client_carousel_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPUserBearerToken":[]}]},"post":{"tags":["Client Management"],"summary":"Client Carousel Post","description":"Called whenever the UI marks a carousel page as no longer to be displayed.","operationId":"client_carousel_post_v1_client_carousel_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPUserBearerToken":[]}]}},"/v1/adapter/cfg/service":{"post":{"tags":["Adapter Management"],"summary":"Adapter Cfg Service","description":"Change the Adapter Service Configuration.","operationId":"adapter_cfg_service_v1_adapter_cfg_service_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPUserBearerToken":[]}]}},"/v1/adapter/cfg/name":{"post":{"tags":["Adapter Management"],"summary":"Adapter Cfg Name","description":"Give an adapter a descriptive name.\n\nAllows the descriptive name of the adapter to be set. Typically used by a UI\nto allow a client to give an adapter a more meaningful name like \"Rental\nAppt. 1\"","operationId":"adapter_cfg_name_v1_adapter_cfg_name_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPUserBearerToken":[]}]}},"/v1/adapter/cfg/locale":{"post":{"tags":["Adapter Management"],"summary":"Adapter Cfg Locale","description":"Set Locale specific information for an adapter.","operationId":"adapter_cfg_locale_v1_adapter_cfg_locale_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPUserBearerToken":[]}]}},"/v1/adapter/cfg/datacap":{"post":{"tags":["Adapter Management"],"summary":"Adapter Cfg Datacap","description":"Set the datacap for a particular adapter.","operationId":"adapter_cfg_datacap_v1_adapter_cfg_datacap_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPUserBearerToken":[]}]}},"/v1/adapter/cfg/wifi":{"post":{"tags":["Adapter Management"],"summary":"Adapter Cfg Wifi","description":"Set the WiFi settings for a particular adapter.","operationId":"adapter_cfg_wifi_v1_adapter_cfg_wifi_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPUserBearerToken":[]}]}},"/v1/adapter/cfg/subscription":{"get":{"tags":["Adapter Management"],"summary":"Adapter Cfg Subscription","description":"Set the current subscription for an Adapter.","operationId":"adapter_cfg_subscription_v1_adapter_cfg_subscription_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPUserBearerToken":[]}]}},"/v1/adapter/find":{"get":{"tags":["Adapter Management"],"summary":"Adapter Find","description":"Find Unassociated adapters we can bind the client account to.","operationId":"adapter_find_v1_adapter_find_get","parameters":[{"required":false,"schema":{"title":"Code","anyOf":[{"type":"integer"},{"type":"string","format":"EUI"}]},"name":"code","in":"query"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AllFoundAdaptersReply"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPUserBearerToken":[]}]}},"/v1/adapter/claim":{"post":{"tags":["Adapter Management"],"summary":"Adapter Claim","description":"Claim the specified adapter for the clients account.","operationId":"adapter_claim_v1_adapter_claim_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPUserBearerToken":[]}]}},"/v1/adapter/list":{"get":{"tags":["Adapter Management"],"summary":"Adapter List","description":"Lists one or all adapters associated with the clients account.","operationId":"adapter_list_v1_adapter_list_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPUserBearerToken":[]}]}},"/v1/adapter/health":{"get":{"tags":["Adapter Management"],"summary":"Adapter Get Health","description":"Query the result of adapter diagnostics.","operationId":"adapter_get_health_v1_adapter_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPUserBearerToken":[]}]},"post":{"tags":["Adapter Management"],"summary":"Adapter Post Health","description":"Start a diagnostic health check now.","operationId":"adapter_post_health_v1_adapter_health_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPUserBearerToken":[]}]}},"/v1/adapter/usage":{"get":{"tags":["Adapter Management"],"summary":"Adapter Usage","description":"Get device data usage.","operationId":"adapter_usage_v1_adapter_usage_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPUserBearerToken":[]}]}},"/v1/adapter/reset":{"post":{"tags":["Adapter Management"],"summary":"Adapter Reset","description":"Reset the specified adapter on the clients account.","operationId":"adapter_reset_v1_adapter_reset_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPUserBearerToken":[]}]}},"/v1/profile/cfg/name":{"post":{"tags":["Profile Management"],"summary":"Profile Name","description":"Allows the descriptive name or icon of a profile to be changed.","operationId":"profile_name_v1_profile_cfg_name_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPUserBearerToken":[]}]}},"/v1/profile/cfg/bedtimes":{"post":{"tags":["Profile Management"],"summary":"Profile Bedtimes","description":"Allows the Start time for \"Bedtime\" to be set independently.\n\nFor \"School Nights\" and \"Other Nights\". The duration of a \"Bedtime\" is\nsystem controlled. School Nights are the nights BEFORE a school day. So, in\nthe typical school system where a school day is Monday to Friday, school\nnights are Sunday thru Thursday.","operationId":"profile_bedtimes_v1_profile_cfg_bedtimes_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPUserBearerToken":[]}]}},"/v1/profile/cfg/bedtime-delay":{"post":{"tags":["Profile Management"],"summary":"Profile Bedtime Delay","description":"Allows todays bedtime to be delayed by the amount of minutes specified.\n\nThe delay can not be set, such that it would extend beyond the end of the\nbedtime period. At the end of the bedtime period, the delay will be reset to\nzero. It only operates once and is reset to zero at the end of bedtime\n(6am).","operationId":"profile_bedtime_delay_v1_profile_cfg_bedtime_delay_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPUserBearerToken":[]}]}},"/v1/profile/cfg/setting":{"post":{"tags":["Profile Management"],"summary":"Profile Setting","description":"Allows all devices, on a profile, access to the internet to be paused.\n\nEither for a timed period, or indefinitely, or for safesearch to be\nenforced, or youtube to be restricted, as required.","operationId":"profile_setting_v1_profile_cfg_setting_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPUserBearerToken":[]}]}},"/v1/profile/list":{"get":{"tags":["Profile Management"],"summary":"Profile List","description":"Generates a list of specific profile.\n\nOr all profiles associated with the clients account.","operationId":"profile_list_v1_profile_list_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPUserBearerToken":[]}]}},"/v1/profile/create":{"post":{"tags":["Profile Management"],"summary":"Profile Create","description":"Creates a new profile for the client.\n\nInitially the profile will have default settings and no devices, the only\nthing set in creation is the profile name (which must be unique to the\nclient) and its icon.","operationId":"profile_create_v1_profile_create_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPUserBearerToken":[]}]}},"/v1/profile/delete":{"post":{"tags":["Profile Management"],"summary":"Profile Delete","description":"Deletes an existing profile for the client.\n\nAny devices which remain attached to the profile will be moved to the system\n\"shared\" profile.","operationId":"profile_delete_v1_profile_delete_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPUserBearerToken":[]}]}},"/v1/profile/usage":{"get":{"tags":["Profile Management"],"summary":"Profile Usage","description":"Generates a list of data usage values for a profile.\n\nAt a specified resolution. Profile usage is a synthetic aggregate of all\ndevice usage, so, for example, if a high volume device is moved between\nprofiles, the old profiles usage will decrease by the devices usage, and the\nnew profile of the device will increase its usage by the same amount.","operationId":"profile_usage_v1_profile_usage_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPUserBearerToken":[]}]}},"/v1/device/list":{"get":{"tags":["Device Management"],"summary":"Device List","description":"Generates a Device list.\n\nOf either, all devices associated with the client, a specific device, all\ndevices on a profile, or all devices on an adapter.","operationId":"device_list_v1_device_list_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPUserBearerToken":[]}]}},"/v1/device/assign":{"post":{"tags":["Device Management"],"summary":"Device Assign","description":"Assigns a device to a profile.\n\nCan only assign devices to profiles that exist associated with the same\nadapter.","operationId":"device_assign_v1_device_assign_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPUserBearerToken":[]}]}},"/v1/device/usage":{"get":{"tags":["Device Management"],"summary":"Device Usage","description":"Generates a list of data usage values for a device, at a specified resolution.","operationId":"device_usage_v1_device_usage_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPUserBearerToken":[]}]}},"/v1/device/name":{"post":{"tags":["Device Management"],"summary":"Device Name","description":"Assigns a device to a profile.\n\nCan only assign devices to profiles that exist associated with the same\nadapter.","operationId":"device_name_v1_device_name_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPUserBearerToken":[]}]}},"/v1/device/setting":{"post":{"tags":["Device Management"],"summary":"Device Setting","description":"Sets the state of a particular device setting.","operationId":"device_setting_v1_device_setting_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPUserBearerToken":[]}]}},"/v1/device/types":{"get":{"tags":["Device Management"],"summary":"Device Types","description":"Generates a list of all known device types.\n\nAlong with their icons and a device type group classifier.","operationId":"device_types_v1_device_types_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPUserBearerToken":[]}]}},"/v1/streaming/services":{"get":{"tags":["Streaming Management"],"summary":"Streaming Services","description":"Generates a list of streaming services currently supported by the system.\n\nThe List is used to choose the streaming services to be set by the\n/v1/streaming/cfg api call.","operationId":"streaming_services_v1_streaming_services_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPUserBearerToken":[]}]}},"/v1/streaming/cfg":{"get":{"tags":["Streaming Management"],"summary":"Streaming Cfg Get","description":"For a particular Adapter, query its streaming configuration.\n\nThis call will reflect the current applied configuration and any\npending but unconfirmed configuration changes.","operationId":"streaming_cfg_get_v1_streaming_cfg_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPUserBearerToken":[]}]},"post":{"tags":["Streaming Management"],"summary":"Streaming Cfg Post","description":"For a particular Adapter, set its streaming configuration.\n\nWill respond with the current configuration and a pending time stamp that\ncan be compared against since to determine if the setting has been applied or not.","operationId":"streaming_cfg_post_v1_streaming_cfg_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPUserBearerToken":[]}]}},"/v1/admin/chkemail":{"get":{"tags":["Admin Management"],"summary":"Admin Chkemail","description":"Allows and admin to check whether an email address is valid.","operationId":"admin_chkemail_v1_admin_chkemail_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPUserBearerToken":[]}]}},"/v1/admin/deleteadapter":{"post":{"tags":["Admin Management"],"summary":"Admin Deleteadapter","description":"Allows and admin to delete an adapter and all its related information.","operationId":"admin_deleteadapter_v1_admin_deleteadapter_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPUserBearerToken":[]}]}},"/v1/admin/echo":{"post":{"tags":["Admin Management"],"summary":"Admin Echo","description":"Allows and admin to directly send a message to an adapter.","operationId":"admin_echo_v1_admin_echo_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPUserBearerToken":[]}]}},"/v1/admin/generateusagestatistics":{"post":{"tags":["Admin Management"],"summary":"Admin Generateusagestatistics","description":"Allows and admin to generate testing usage.","operationId":"admin_generateusagestatistics_v1_admin_generateusagestatistics_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPUserBearerToken":[]}]}},"/v1/admin/vpncredfailurecount":{"get":{"tags":["Admin Management"],"summary":"Admin Vpncredfailurecount","description":"Allows and admin to check the number of vpn creds that ran out this month.","operationId":"admin_vpncredfailurecount_v1_admin_vpncredfailurecount_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPUserBearerToken":[]}]}},"/ext/":{"get":{"tags":["Browser Extension"],"summary":"Get External Ip","description":"Return the external IP.","operationId":"get_external_ip_ext__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IPResponse"}}}}}},"post":{"tags":["Browser Extension"],"summary":"Browser Extension","description":"Browser Extension Command.","operationId":"browser_extension_ext__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BrowserExtensionCommand"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BrowserExtensionState"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/local/shakeitshakeitwearehealthy":{"get":{"tags":["Local Tasks"],"summary":"K8S Health Check","description":"Just answer 200 for k8s to check in on us.","operationId":"k8s_health_check_local_shakeitshakeitwearehealthy_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/local/generate_configuration":{"post":{"tags":["Local Tasks"],"summary":"Generate Configuration","description":"Generate Configuration Options.","operationId":"generate_configuration_local_generate_configuration_post","parameters":[{"description":"Randomize passwords and keys automatically.","required":false,"schema":{"title":"Randomize","type":"boolean","description":"Randomize passwords and keys automatically.","default":false},"name":"randomize","in":"query"},{"description":"Encrypt database configuration with secret_secret env var.","required":false,"schema":{"title":"Encrypt","type":"boolean","description":"Encrypt database configuration with secret_secret env var.","default":false},"name":"encrypt","in":"query"}],"requestBody":{"content":{"application/json":{"schema":{"title":"Config","allOf":[{"$ref":"#/components/schemas/ConfigOptions"}],"example":"{\"environment\": {\"stage\": \"dev\", \"db_url\": \"mysql://localhost:3306\", \"db_name\": \"phero2_app\", \"db_user\": \"phero2_app\", \"db_password\": \"CHANGE_ME\", \"secret_secret\": \"\", \"fs_root\": \"/\", \"worker_factor\": 1.0, \"worker_max\": 2, \"unix_bind\": \"/tmp/ph2-mothership.sock\", \"tcp_port\": 10080, \"backlog\": 100, \"log_level\": \"info\", \"log_hostname\": \"debug\", \"ipc_port\": 10000, \"ipc_addr\": \"239.255.255.250\", \"geoip_country\": \"CA\", \"geoip_timezone\": \"America/Toronto\", \"geoip_region\": \"Ontario\", \"geoip_city\": \"Toronto\", \"geoip_longitude\": 43.7001, \"geoip_latitude\": -79.4163}, \"config\": {\"database\": {\"backend\": {\"url\": \"mysql://db-gcp.privacyhero.com\", \"name\": \"phero2_app\", \"username\": \"phero2_app\", \"password\": \"CHANGE_ME\", \"max_connections\": 32, \"stale_timeout\": 10, \"timeout\": 5}, \"vpn\": {\"url\": \"mysql://db-gcp.privacyhero.com\", \"name\": \"phero2_vpn\", \"username\": \"phero2_app\", \"password\": \"CHANGE_ME\", \"max_connections\": 32, \"stale_timeout\": 10, \"timeout\": 5}, \"streaming\": {\"url\": \"mysql://db-gcp.privacyhero.com\", \"name\": \"ph\", \"username\": \"phero2_app\", \"password\": \"CHANGE_ME\", \"max_connections\": 32, \"stale_timeout\": 10, \"timeout\": 5}}, \"general\": {\"mailchimp_key\": \"TskI7dGtVNT68bZFQN377A\", \"bedtime_ends\": \"06:00:00\", \"streaming_change_interval\": \"0:02:00\"}, \"data_usage\": {\"max_age\": \"365 days, 0:00:00\", \"max_report\": \"93 days, 0:00:00\", \"warn_less_than_projection\": \"1 day, 0:00:00\", \"warn_more_than_projection\": \"1 day, 0:00:00\", \"warn_not_enough_records\": \"31 days, 0:00:00\"}, \"device_icons\": {\"url\": \"https://dls6e3a7hyiz6.cloudfront.net/icons/\", \"ext\": \"png\"}, \"streaming_icons\": {\"url\": \"https://dls6e3a7hyiz6.cloudfront.net/streaming-service-icons\", \"ext\": \"png\"}, \"unsubscribed\": {\"whitelist\": [\"^(.*\\\\.)?dev-api2.privacyhero.com\", \"^(.*\\\\.)?privacyhero.com$\", \"^.*\\\\.chargebee.com$\", \"ws://ws2-dev.privacyhero.com\"], \"proxy_url\": null}, \"chargebee\": {\"api_key\": \"test_cdMIduyV0fdhcMA5znXa9b0xkP2mNfYEz\", \"site\": \"streamlocatorbilling-test\", \"callback_user\": \"chargebee\", \"callback_pwd\": \"CHANGE_ME\"}, \"notifications\": {\"offline_delay\": \"0:10:00\", \"firebase_key\": \"{\\\"type\\\": \\\"service_account\\\", \\\"project_id\\\": \\\"privacyhero-6eea0\\\", \\\"private_key_id\\\": \\\"2b9ddfbf6335349d9d3fcdffa0d9bd9efa58679f\\\", \\\"private_key\\\": \\\"-----BEGIN PRIVATE KEY-----\\\\nMIIEugIBADANBgkqhkiG9w0BAQEFAASCBKQwggSgAgEAAoIBAQCFOuqB1XxHnR96\\\\no7RoKXPzes+y+vCmN7pRDf6/qCkeyGkdcL0B8FTyrWefCFsqh8gZTPMPJoRrwi7S\\\\nGLp/wl0ge2dICI4VZpxAuDcs2lNt17gSgkLmI2XsvjWKBKwT3AlgiJ2aanuvyNOJ\\\\nG4q0ryjN+duq1DqxtI2+lpRKRk/gqKBIBfA+hCt3o3bNvOSuFzXGOl/g/Q6wRyTH\\\\nRpK3OQ++x5RdcRdF/lexxzuj8lFbKFgZpnBGOYX4/rLvUdA61Nx83pLnfnY0LjwO\\\\n7l7+9h0LA/k9RVxUQvuORWZxSwb4zqnbxKuO7nl1iI55krf7qL8ysTBPn0S1X+9l\\\\nfNzHaWTlAgMBAAECgf8jQjRNp/H8AdkS28Ai0NWe2iGdfEuzsYvdZ5bDof0/6Enp\\\\nQKzElpXko3+I1u1JlCWgjHzGxarF2d4KPAEfTpDWx9HNfnYbs8wmVJpFhIIPz8cn\\\\nHtIVlcijnrMMk6/2kYTpxz3uX7/cBYn1/xP2PWTPHhDEZOYjoWThy3fzMChzi8sf\\\\nCO4JCzP7nDpVqZHOU6Zt9j3Vw2hsCM+t+ABS32fE1AgHC6AwR9J1OoazHkzbK85A\\\\nRCerJndbA6GosQ8OnSwoG8M11wQjnsFyn1BS5ffUXJmV4PxqOjGmANfN40hJIsFn\\\\nbh8IACWGy0YcOVVW3cY0mT/Si3Srpy2YPWAbmZkCgYEAuOB9yEGGIf7BzSkP6Y5n\\\\nOr652P3kYZXP01kZgVhHEr1IZ13b7QbVAlyZ0hNz/y3TQLq4WpRkwTW8VHqeUYYJ\\\\nWF8fydsAOzkr5aW/vU9o2rmru+w3ASxK/m4dMGLCCn0t6i90PFfowccUAoSsc1tI\\\\nNaXChPVHwS3xe2fSU6Kl0XkCgYEAuHwEqDH+FLUZi59sKYf9m5iODNmhrVkH6aev\\\\nsNsrsOYp97LGpwA5Whl5C17TVv8nIwAxgpNkymilmzQwT3qEvptESULlSTq68ROu\\\\nHaNqJg/cwcRiKOyYKvAt6VKfVJ/VfleJ9nITNxtQdaWOoPaHyJIiy8Trt52xJonI\\\\n4KCbH80CgYBJksVbyX+4zaqQm/PCLbK1NSu+yCN4FmeTo1S8HcaDFaLXyAl6xYpF\\\\nm1Z3vNgfyDvW+bfeDEogfeMJ95ZDuUTEz25WJXptFy56AMFSdGS1DsjiS3oEVH0v\\\\nzeB93f98rx5zoRjv3sg5PaGf8u6yJbSR7PqBcR9yKHd+de3E7OhyeQKBgDsVVPR9\\\\nFk+RdH33788ZQ4qagBvzc0kuM0+MqcLtXn/IJvayZdbERpnpgI+4rdy12NXn0PNt\\\\nuyDsBOXBABvkNDFLTsJbz0z1pztgPyo01OEdwWi5OWq74zwVMc8A7BBRJDHTXVb1\\\\nT9wdPlZ/UD+S1QfSbZxvE8L5mOurww7VwPidAoGASZWnmUZo03Y0TEF6E1eLhYni\\\\nVrAkmN7BztsiRg/12BXQNC+jzkaetzoBuHBWNWlKNKrl33mC7XDmbmRxBXbfcBuQ\\\\nLC3HlLek2yu5YqoVFm4ipVcrObOlbFCAYiFR4rm00+I7dId1VW//hUDviDcXGcp+\\\\nbDna7+yM7WuUr90mipg=\\\\n-----END PRIVATE KEY-----\\\\n\\\", \\\"client_email\\\": \\\"firebase-adminsdk-rhwlw@privacyhero-6eea0.iam.gserviceaccount.com\\\", \\\"client_id\\\": \\\"115291072763108672730\\\", \\\"auth_uri\\\": \\\"https://accounts.google.com/o/oauth2/auth\\\", \\\"token_uri\\\": \\\"https://oauth2.googleapis.com/token\\\", \\\"auth_provider_x509_cert_url\\\": \\\"https://www.googleapis.com/oauth2/v1/certs\\\", \\\"client_x509_cert_url\\\": \\\"https://www.googleapis.com/robot/v1/metadata/x509/firebase-adminsdk-rhwlw%40privacyhero-6eea0.iam.gserviceaccount.com\\\"}\"}, \"auth\": {\"jti_app\": \"6568a4d7-90ac-4324-b2e8-8aeec4d6b15c\", \"jti_client\": \"cbd62b8d-cb17-4dc3-9509-28202937adf2\", \"jti_admin\": \"422a18b2-e4bd-4801-9c9d-6dfc425324a9\", \"jwt_app_key\": \"0bEEaNHIeJ7Z9kfBpZkeHnYeEdQ_X_Vw8_vBK5X_kAg\", \"jwt_user_key\": \"0bEEaNHIeJ7Z9kfBpZkeHnYeEdQ_X_Vw8_vBK5X_kAg\", \"email_validity\": \"2 days, 0:00:00\", \"admin_email_whitelist\": [\"*@privacyhero.com\"]}, \"vpn\": {\"borrowed_time\": \"1:00:00\", \"speedtest_reportable\": \"30 days, 0:00:00\"}, \"carousel\": {\"template_dir\": \"/data/\", \"delay\": \"0:00:30\"}}}"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"text/plain":{"schema":{"type":"string"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/local/configuration":{"get":{"tags":["Local Tasks"],"summary":"Get Configuration","description":"Generate Configuration Options.","operationId":"get_configuration_local_configuration_get","parameters":[{"description":"True = Return Default Config, False = Return current config.","required":false,"schema":{"title":"Default","type":"boolean","description":"True = Return Default Config, False = Return current config.","default":true},"name":"default","in":"query"},{"description":"If True, don't obscure secret values.","required":false,"schema":{"title":"Show Secrets","type":"boolean","description":"If True, don't obscure secret values.","default":false},"name":"show_secrets","in":"query"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/local/ws_tx_test":{"post":{"tags":["Local Tasks"],"summary":"Ws Tx Test","description":"Test Websocket send function.","operationId":"ws_tx_test_local_ws_tx_test_post","parameters":[{"description":"Router to send message to.","required":true,"schema":{"title":"Mac","type":"string","description":"Router to send message to.","format":"EUI"},"name":"mac","in":"query"}],"requestBody":{"content":{"application/json":{"schema":{"title":"Body","allOf":[{"$ref":"#/components/schemas/AnyBody"}],"description":"Json message to send to router."}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/local/account":{"delete":{"tags":["Local Tasks"],"summary":"Rm Account","description":"Removes the specified account for testing purposes.","operationId":"rm_account_local_account_delete","parameters":[{"description":"Account Email to remove.","required":true,"schema":{"title":"Email","type":"string","description":"Account Email to remove.","format":"email"},"name":"email","in":"query"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/local/router":{"delete":{"tags":["Local Tasks"],"summary":"Rm Router","description":"Removes the specified router for testing purposes.","operationId":"rm_router_local_router_delete","parameters":[{"description":"Router Mac to remove.","required":true,"schema":{"title":"Mac","type":"string","description":"Router Mac to remove.","format":"EUI"},"name":"mac","in":"query"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/chargebee/v2":{"post":{"tags":["Chargebee Callback"],"summary":"Chargebee Webhook","description":"Chargebee webhook handler.\n\nArgs:\n    event (ChargebeeWebhookEvent): The webhook event from chargebee\n    userpass (HTTPBasicCredentials): Username which authenticated.","operationId":"chargebee_webhook_chargebee_v2_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChargebeeWebhookEvent"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBasicUserPass":[]}]}},"/websocket/api/link_established":{"post":{"tags":["Websocket Messages"],"summary":"Link Established","description":"\nThis message is sent from the Adapter to the Backend as the very first\nmessage it sends AFTER establishing any websocket connection to the\nbackend.  It allows the backend to perform link connection housekeeping\nfor the adapter, which is necessary for proper operation.\n\nUpon receipt, the Backend will queue the initial configuration for the\nrouter in the following order:\n\n1. [*Initial Configuration*](#message-InitialConfig)\n2. [*Unsubscribed Whitelist*](#message-UnsubscribedWhitelist)\n3. [*Block List Cfg*](#operation-publish-BLOCKLIST_CFG) (1 message for each blocklist category)\n4. [*Adapter Services*](#message-AdapterServices)\n5. [*WIFI Configuration*](#message-WifiConfiguration)\n6. [*Set VPN Bypass Domains*](#message-VPNSetBypassDomain)\n7. [*VPN Server Connect*](#message-VPNConnect)\n8. [*Streaming Auth*](#message-AuthorizeStreaming)\n9. [*Streaming Cfg*](#message-ConfigureStreaming)\n10. [*Known Devices*](#message-KnownDevices)\n11. [*Change Device State*](#message-ChangeDeviceState) (As many as required to configure all devices)\n12. [*Set Bedtime*](#message-SetBedtime) (1 message each for as many bedtime schedules exist.)\n","operationId":"link_established_websocket_api_link_established_post","parameters":[{"description":"\nCredentials supplied from websocket connection. This is\nInternally generated by a websockets authorized connection and\ndoes not form part of the websocket message.\n","required":true,"schema":{"title":"X-Credentials","type":"string","description":"\nCredentials supplied from websocket connection. This is\nInternally generated by a websockets authorized connection and\ndoes not form part of the websocket message.\n"},"name":"X-Credentials","in":"header"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LinkEstablishedMessage"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"210":{"description":"\n## Initial Configuration\n\nThis is the very first configuration message sent to the router after a\nrouter first comes online to the backend and send [*Initial Configuration*](#message-InitialConfig). It\ncontains key configuration items which are required for proper operation.\nIF any of these items change, this message can be sent again by the backend\nat any time.\n\nNote: IF the router is reconnecting, but has already been connected to the\nbackend then it is possible that neither this, nor any other configuration\nmessage will be sent if there has been no changes to the configuration.\n","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InitialCfg"}}}},"211":{"description":"\n## Unsubscribed Router Whitelist Configuration\n\nThis message contains the list of urls devices may access when there is no\nactive subscription for the router.  It is sent in response to a\n[*Link Established*](#message-LinkEstablished) message from the Adapter.\n","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnsubscribedWhitelist"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/websocket/api/resetting":{"post":{"tags":["Websocket Messages"],"summary":"Router Resetting.","description":"\n#Description\n\nRouter is going to do a hardware reset.\nThis message is sent as a reply to the [*Reset Router*](#message-Reset) message.\n\n##Parameters\n\n- **message**: Router is going to do a hardware reset.\n    * Constant:  \"resetting\"\n\n- **tstamp**: The tstamp in this message is the same tstamp sent in the\nresetting message from the adapter which triggered it to be sent.\n\n\n- **id**: Optional, ID Field. This field is only sent if this message is a\nreply to a message received from the backend, AND that message included the\nID Field. In that case, it is included unchanged.\n\n- **in_time**: The number of seconds before the reset will occur. IF\nomitted, reset is imminent.\n\n","operationId":"resetting_websocket_api_resetting_post","parameters":[{"description":"\nCredentials supplied from websocket connection. This is\nInternally generated by a websockets authorized connection and\ndoes not form part of the websocket message.\n","required":true,"schema":{"title":"X-Credentials","type":"string","description":"\nCredentials supplied from websocket connection. This is\nInternally generated by a websockets authorized connection and\ndoes not form part of the websocket message.\n"},"name":"X-Credentials","in":"header"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Resetting"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/websocket/api/adapter_services_state":{"post":{"tags":["Websocket Messages"],"summary":"Adapter Service State","description":"\n# Description\n\nThis is the reply to setting the adapter service states from the\nAdapter Services message.\n\nIf the configuration command contained multiple services,\nthe reply may also contain multiple services, or services may be responded\nto in a group or individual, depending on how long the service takes to start\non the adapter and the adapters implementation. However, each reply must\ncontain the tstamp from the original command from the backend,\nand the ID if present.\n\nThis reply informs the backend of the final state of the service,\nie, if UPNP server was commanded to turn on, but fails, the reply will be sent\nas a result of the failure AND will have its state set to false.\nThe tstamp will still reflect the tstamp in the original command,\nas will the ID if present.\n\nVPN status updates are not reported using this message.\nSee the [*VPN Connection Status*](#message-VPNStatus) message for details.\n\nIF a service state can change without command from the backend,\nthis message is sent unsolicited with the changed state for the service.\nIn that case, the tstamp MUST be set to the tstamp of the time the state\nchanged on the adapter, and there must be no ID field.\n\n## Parameters\n\n- **message**: Report current state of a service on the Adapter.\n    * Constant:  \"adapter-services-state\"\n\n- **tstamp**: The response tstamp, as taken from the original command in\nthe case of a reply, OR the tstamp the state changed on the adapter if\nsent asynchronously.\n\n- **id**: Optional, ID Field. The Adapter does not do any processing or\nverification of the ID field, if it is set, it must be returned verbatim\nin the paired reply.\n\n- **services**: The final state of the service on the Adapter,\nafter processing the command, or as a result of an asynchronous change.\n    * service: The name of the service being configured.\n        * AdBlocking = Globally Enable/Disable AdBlocking\n        * StreamRelocation = Globally Enable/Disabe Stream Relocation\n        * UPNP = Enable a UPNP server to manage port forwarding for lan clients.\n        * WIFI = Globally Enable/Disbale the Wifi on the Router.\n        * WPS = Enable/Disable the WPS Button.\n        This does not enable the WPS function,\n        only allows the button to operate normally or not.\n        Active WPS State changes are reported using the WPS Status message\n        * Subscribed = True - Normal Operation.\n        False - Subscription captive portal mode.\n        In captive portal mode only whitelisted domains have access to the internet.\n        See Unsubscribed Whitelist message.\n    * state: The state to set the service to.\n        * true = Turn the service ON.\n        * false = Turn the service OFF.\n","operationId":"adapter_services_state_websocket_api_adapter_services_state_post","parameters":[{"description":"\nCredentials supplied from websocket connection. This is\nInternally generated by a websockets authorized connection and\ndoes not form part of the websocket message.\n","required":true,"schema":{"title":"X-Credentials","type":"string","description":"\nCredentials supplied from websocket connection. This is\nInternally generated by a websockets authorized connection and\ndoes not form part of the websocket message.\n"},"name":"X-Credentials","in":"header"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ServiceState"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/websocket/api/block_list_applied":{"post":{"tags":["Websocket Messages"],"summary":"Block List Applied","description":"Handle \"block-list-applied\".","operationId":"block_list_applied_websocket_api_block_list_applied_post","parameters":[{"description":"\nCredentials supplied from websocket connection. This is\nInternally generated by a websockets authorized connection and\ndoes not form part of the websocket message.\n","required":true,"schema":{"title":"X-Credentials","type":"string","description":"\nCredentials supplied from websocket connection. This is\nInternally generated by a websockets authorized connection and\ndoes not form part of the websocket message.\n"},"name":"X-Credentials","in":"header"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/websocket/api/vpn_reconnect":{"post":{"tags":["Websocket Messages"],"summary":"VPN Reconnect.","description":"\n# Description\n\nThis message causes the backend to produce a new list of valid vpn servers\nand credentials and return it to the requesting router by way of a\n[*VPN Server Connect*](#message-VPNConnect) message.\n\nThis message is only sent once, if an established VPN connection drops, and\nthe Router is unable to re-establish a connection using the same credentials\nas the last dropped link. IF the router is unable to establish a connection\nto any of the listed servers, the process terminates and this message is not\nsent. Instead the router sends a [*VPN Connection Status*](#message-VPNStatus) message\ndetailing the failure.\n\n\n## Parameters\n\n- **message**: Reconnect to a listed VPN Server.\n    * Constant:  \"vpn-reconnect\"\n\n- **tstamp**: The request timestamp of the configuration.\n\n- **id**: Optional, ID Field. The Adapter does not do any processing or\n  verification of the ID field, if it is set, it must be returned verbatim\n  in the paired reply.\n","operationId":"vpn_reconnect_websocket_api_vpn_reconnect_post","parameters":[{"description":"\nCredentials supplied from websocket connection. This is\nInternally generated by a websockets authorized connection and\ndoes not form part of the websocket message.\n","required":true,"schema":{"title":"X-Credentials","type":"string","description":"\nCredentials supplied from websocket connection. This is\nInternally generated by a websockets authorized connection and\ndoes not form part of the websocket message.\n"},"name":"X-Credentials","in":"header"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VPNReconnect"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/websocket/api/vpn_status":{"post":{"tags":["Websocket Messages"],"summary":"VPN Connection Status.","description":"\n#Description\n\nThis message advises the current VPN status to the backend.\n\nDuring VPN connection, multiple status messages should be sent tracking the\nmajor phases of VPN connection initiation, and also, reconnections on a failed\nlink and link disconnection. VPN Connection/Disconnection is triggered by the\nreceipt of a [*VPN Server Connect*](#message-VPNConnect) message.\n\n##Parameters\n\n- **message**: Report VPN Connection Status.\n    * Constant:  \"vpn-status\"\n\n- **tstamp**: The request timestamp of the configuration.\n\n- **id**: Optional, ID Field. The Adapter does not do any processing or\nverification of the ID field, if it is set, it must be returned verbatim\nin the paired reply.\n\n- **status**: The current status of the VPN process.\n    * test-connecting = Connecting to a VPN server to test.\n    * testing = Test connection to VPN succeeded and test started. Test\n    results will be sent in [*Speedtest Result*](#message-SpeedTest).\n    * test-failed = Either the connection couldn't be established to\n    test, or the test has failed to execute.\n    * connecting = Connecting the VPN tunnel for general use.\n    * connected = The connection to the VPN is established and routing is\n    operational.\n    * failed = The vpn server failed to connect or the link broke.\n    After this call the router may no longer use the credentials presented\n    in [*VPN Server Connect*](#message-VPNConnect) for the server.\n    * reconnecting = The VPN server was running and failed, trying to\n    reconnect. This status is sent instead of the connecting status when a\n    vpn link was established, but dropped and we are attempting to\n    re-establish the connection.\n    * disconnected = The last possible server was tested and failed, giving\n    up trying to enable VPN. server should not be present, as no server is\n    being accessed in this state.\n\n- **server**: The server ID, sent for every status except disconnected\n\n- **description**: String description providing extra information about a\nstate. It is valid for the same state to be sent multiple times with\nchanging desc_string.\nFor example testing multiple times for the same URL with a running\ncommentary about the test as it executes.\n","operationId":"vpn_status_websocket_api_vpn_status_post","parameters":[{"description":"\nCredentials supplied from websocket connection. This is\nInternally generated by a websockets authorized connection and\ndoes not form part of the websocket message.\n","required":true,"schema":{"title":"X-Credentials","type":"string","description":"\nCredentials supplied from websocket connection. This is\nInternally generated by a websockets authorized connection and\ndoes not form part of the websocket message.\n"},"name":"X-Credentials","in":"header"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VPNStatus"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/websocket/api/vpn_bypass_domain":{"post":{"tags":["Websocket Messages"],"summary":"Vpn Bypass Domain","description":"Handle \"vpn-bypass-domain\".","operationId":"vpn_bypass_domain_websocket_api_vpn_bypass_domain_post","parameters":[{"description":"\nCredentials supplied from websocket connection. This is\nInternally generated by a websockets authorized connection and\ndoes not form part of the websocket message.\n","required":true,"schema":{"title":"X-Credentials","type":"string","description":"\nCredentials supplied from websocket connection. This is\nInternally generated by a websockets authorized connection and\ndoes not form part of the websocket message.\n"},"name":"X-Credentials","in":"header"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/websocket/api/wps_status":{"post":{"tags":["Websocket Messages"],"summary":"WPS Status.","description":"\n#Description\n\nThis message advises the current WPS Function status to the backend. This\nis a summary of the result of presing the WPS button on the router.\n\nSee [*Adapter Service State*](#message-AdapterServicesState) for the configuration which\nenables/disables the WPS function.\n\n##Parameters\n\n- **message**: Report WPS Function Status.\n    * Constant: \"wps-status\"\n\n- **tstamp**: The request timestamp of the configuration.\n\n- **id**: Optional, ID Field. The Adapter does not do any processing or\nverification of the ID field, if it is set, it must be returned\nverbatim in the paired reply.\n\n- **status**: The current status of the WPS function.\n    * activated = The WPS function is activated. The optional duration\n    field defines the number of seconds the WPS mode will be active.\n    * blocked = The WPS function activation button was pressed, but the\n    function is blocked by configuration. duration is omitted with this\n    status.\n    * completed = The WPS function is no longer activated. duration is\n    omitted with this status.\n\n- **duration**: Number of seconds WPS will be activated on the router.\n","operationId":"wps_status_websocket_api_wps_status_post","parameters":[{"description":"Credentials supplied from websocket connection.","required":true,"schema":{"title":"X-Credentials","type":"string","description":"Credentials supplied from websocket connection."},"name":"X-Credentials","in":"header"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WPSStatus"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/websocket/api/wifi_status":{"post":{"tags":["Websocket Messages"],"summary":"Wifi Status","description":"Handle \"wifi-status\".","operationId":"wifi_status_websocket_api_wifi_status_post","parameters":[{"description":"\nCredentials supplied from websocket connection. This is\nInternally generated by a websockets authorized connection and\ndoes not form part of the websocket message.\n","required":true,"schema":{"title":"X-Credentials","type":"string","description":"\nCredentials supplied from websocket connection. This is\nInternally generated by a websockets authorized connection and\ndoes not form part of the websocket message.\n"},"name":"X-Credentials","in":"header"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WifiStatus"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/websocket/api/speedtest":{"post":{"tags":["Websocket Messages"],"summary":"Speedtest.","description":"\n#Description\n\nThis message causes the latest speedtest result to be logged for the\nAdapter in the backend.\n\n##Parameters\n\n- **message**: Report of Speed Test Results.\n    * Constant:  \"speedtest\"\n\n- **tstamp**: IF the speedtest was performed as a result of a automatic\nor scheduled test the timestamp is the time the speed test started on the\nadapter. IF the speedtest was conducted as a result of a command from the\nbackend, the tstamp is the tstamp from the backend request to commence\nthe speedtest.\n\n- **id**: Optional, ID Field. The Adapter does not do any processing or\nverification of the ID field, if it is set, it must be returned\nverbatim in the paired reply.\n\n- **address**: The IP of the website the speedtest was conducted against.\n\n- **ipv4**: The Connections Internet IPv4 Address.\n\n- **ipv6**: The Connections Internet IPv6 Address.\n\n- **vpn**: IF and ONLY IF this speedtest is through the VPN Tunnel, the\nVPN ID of the VPN Server tested will be returned in the vpn field.\nThe backend will assume the speedtest result is for a WAN if this field\nis missing, therefore it is optional and must only be included in VPN\nSpeedtest results. See [*VPN Server Connect*](#message-VPNConnect).\n\n- **tx**: The result of the speedtest in the specified direction.\n    * txfr: The total number of bytes transferred.\n    * ms: The total number of milliseconds the transfer took.\n\n- **rx**: The result of the speedtest in the specified direction.\n    * txfr: The total number of bytes transferred.\n    * ms: The total number of milliseconds the transfer took.\n\n- **latency**: Results of latency test on speedtest server,\nfor a minimum of 10 tests.\n","operationId":"speedtest_websocket_api_speedtest_post","parameters":[{"description":"Credentials supplied from websocket connection.","required":true,"schema":{"title":"X-Credentials","type":"string","description":"Credentials supplied from websocket connection."},"name":"X-Credentials","in":"header"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SpeedTest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/websocket/api/device_info":{"post":{"tags":["Websocket Messages"],"summary":"Device Info.","description":"\n# Description\n\nThis message is sent from the Adapter to the Backend whenever a new device\nis discovered, or if any of the data fields (excluding the online status)\nwithin this message about the device changes. There is no difference between\na new device or updating a pre-existing device. Devices are identified by\ntheir MAC address and MAC is assumed to be unique on a single adapter.\n\n## Parameters\n- **message**: Advise the Backend that the Device has been discovered or\nhas changed.\n    * Constant:  \"device info\"\n\n- **tstamp**: The time the device was discovered/changed.\n\n- **id**: Optional, ID Field. The Adapter does not do any processing or\nverification of the ID field, if it is set, it must be returned verbatim\nin the paired reply.\n\n- **mac**: The Devices MAC address. Assumed unique per adapter. Eg.\n\"00:11:22:33:44:55\" Also accepts \"001122334455\" or \"00-11-22-33-44-55\"\n\n- **ipv4**: The IPv4 Address assigned to this Device. Alternatively, if the\ndevice is using a fixed IP and not one assigned by DHCP, the IP address it\nwas discovered to be using.\n\n- **ipv6**: Optional: The IPv6 Address assigned to this Device.\nAlternatively, if the device is using a fixed IPv6 and not one assigned by\nDHCP, the IP address it was discovered to be using.\n\n- **connection**: Optional: The port the device connected on. IF not sent,\nit is interpreted as \"Unknown\". Valid values are \"lan\", \"wifi2\" and \"wifi5\".\n\"lan\" = Device was discovered over the wired lan port.\n\"wifi2\" = Device was discovered on the 2.4Ghz Wifi connection to the router.\n\"wifi5\" = Device was discovered on the 5ghz Wifi connection to the router.\nIF the connection value is sent but is not one of these, the backend will\nrecord the connection as \"unknown\". This field is NOT case sensitive.\n\n- **guest**: Optional: If sent, AND set to true, the device was discovered\non a \"guest\" network connection and not the main network.\n\n- **online**: Current known Online state for the device. This is the ONLY\nfield whose change of value would not cause a new \"device info\" message to\nbe sent. If a device falls offline or comes back online, the \"device state\"\nmessage should be sent.\n\n- **meta**: metadata discovered about the device.\n    * dhcp: DHCP Data discovered about the device.\n        * hostname: The Hostname the Device declared itself as. IF the\n        device did not declare itself with a hostname, the adapter\n        should synthesize a hostname for it. This hostname supplied to the\n        backend should be the hostname only part and not include the\n        network suffix. ie, if the device declared itself as \"MyPS5\" and\n        the local lan suffix is \"lan\" the hostname sent should be \"MyPS5\".\n        This is Option 12 from the DHCP Request.\n        * class: Optional. The class of device discovered from DHCP. Can\n        be omitted from the message if no class was provided by the device.\n        This is option 60 from the DHCP Request.\n        *clientid: Optional. The client id of device discovered from DHCP.\n        Can be omitted from the message if no client id was provided by the\n        device. This is option 61 from the DHCP Request.\n        * parameters: Optional. The Parameter list the client requested be\n        returned to it's dhcp request. This is option 55 from the DHCP\n        Request.\n    * upnp: Optional. IF a upnp xml device metadata can be retrieved from a\n    device then it is to be sent in this sub field, otherwise it is\n    omitted. It is possible for a single physical device to report as\n    multiple internal upnp devices. Each discovered internal upnp device\n    is reported in this array.\n        * deviceType: The Device type reported by the UPNP Data of this\n        internal device.\n        eg: urn:schemas-upnp-org:device:InternetGatewayDevice:1\n        * manufacturer: The Device manufacturer reported by the UPNP\n        Data of this internal device. eg: Samsung\n        * modelName: The Model Name reported by the UPNP Data of this\n        internal device. eg: QN82Q80RAFXZA\n        * friendlyName: The Friendly Name reported by the UPNP Data of this\n        internal device. eg: 80\" 4k QLED Flatscreen TV\n        * serviceTypeList: The List of service types reported by the UPNP\n        Data of this internal device.\n        eg: [\"urn:schemas-upnp-org:service:Layer3Forwarding:1\"]\n            * '0': Individual Service Type Entry.\n    * snmp: Optional. If SNMP metadata can be obtained/probed for a device,\n    it is sent in this field, otherwise it is omitted.\n        * sysoid: The System OID of the Device.\n        * name: The name the device reports via snmp.\n        * description: The description the device reports via snmp.\n        * contact: The contact the device reports via snmp.\n        * location: The location the device reports via snmp.\n    * bonjour: Optional. If BONJOUR metadata can be obtained/probed for a\n    device, it is sent in this field, otherwise it is omitted.\n        * name: The name of a device discovered via Bonjour.\n        * services: The list of services exposed via Bonjour.\n            * name: The name of a service discovered on the device via Bonjour.\n            * txt: The TXT record from Answers or Additional records.\n                * '0': The TXT record from Answers or Additional records.\n    * smb: Optional. If SMB/Netbios metadata can be obtained/probed for a\n    device, it is sent in this field, otherwise it is omitted.\n        * name: If the SMB/Netbios reported Name of the device can be\n        determined, it is sent in this field.\n        * domain: If the SMB/Netbios reported Domain of the device can be\n        determined, it is sent in this field.\n    * hua: Optional. HTTP User Agents discovered for the device, otherwise it\n    is omitted.\n        * userAgent: This is the host user agent sniffed from http traffic\n        from the device. This data can not be obtained from https, only http\n        connections. As there may be more than one userAgent string detected\n        , this is a list of the detected useragents.\n","operationId":"device_info_websocket_api_device_info_post","parameters":[{"description":"\nCredentials supplied from websocket connection. This is\nInternally generated by a websockets authorized connection and\ndoes not form part of the websocket message.\n","required":true,"schema":{"title":"X-Credentials","type":"string","description":"\nCredentials supplied from websocket connection. This is\nInternally generated by a websockets authorized connection and\ndoes not form part of the websocket message.\n"},"name":"X-Credentials","in":"header"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeviceInfo"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/websocket/api/device_state_changed":{"post":{"tags":["Websocket Messages"],"summary":"Device State Changed.","description":"\n# Description\n\nThis message is sent from the Adapter to the Backend and either confirms\nthe adapters request to set state from the [*Change Device State*](#message-ChangeDeviceState) message,\nOR advises that the state changed asynchronously without being requested\nby the backend.\n\n## Parameters\n- **message**: Advise the Adapter to change the state of the devices.\n    * Constant:  \"device state changes\"\n\n- **tstamp**: IF this is a reply to the backend setting the device state,\nthis must equal the tstamp in the original request. IF this is an advice\nthat a state changed asynchronously, this is the time the adapter\nchanged/detected the state.\n\n\n- **id**: Optional, ID Field. The Adapter does not do any processing\nor verification of the ID field, if it is set, it must be returned\nverbatim in the paired reply.\n\n- **devices**: An array of Device MAC addresses the state changes were\napplied to. All devices listed had the same state change made as listed\nin this message.\n    * 'mac': The Devices MAC address. Assumed unique per adapter.\n    Eg. \"00:11:22:33:44:55\" Also accepts\n    \"001122334455\" or \"00-11-22-33-44-55\"\n\n- **states**: The array of services and states that change. If this is a\nreply to the Change Device State command from the backend, then it lists\nthe same states that were requested by the backend. If asynchronous state\nchanges occur, the actual changes that ocurred are listed only.\n    * service: The service/filter on the device which changed state.\n        * vpn - The Device will route through the VPN when True\n        (if VPN is enabled)\n        * adblocking - Ad Blocking is Enabled on the device when True.\n        * device-protection - Device Protection is Enabled on the device\n        when True.\n        * internet-pause - Internet is paused for the device when True.\n        * youtube-restricted - Youtube returns restricted search results\n        when True.\n        * safesearch - Search Engines return \"safe\" results when True.\n        * adult-block - Adult Content is \"blocked\" when True.\n        * online - If the device is online or not. Only an asynchronous\n        state change.\n    Note: internet-pause also has a timed mode. The boolean option in this\n    message terminates any timed-pause current on the device and sets the state\n    accordingly. online is only an asynchronous state change. it is only ever\n    sent as a result of the adapter detecting a device coming online or\n    falling offline.\n\n    * state:\n        * true - The service/filter is enabled.\n        * false - The service/filter is disabled.\n\n    * finishes : OPTIONAL, and ONLY INCLUDED when a timeout is supplied for\n    the state, this field in the reply specifies when the timed operation will\n    complete. It is the Unix Epoch Date/Time as seconds since midnight 1970 UTC.\n","operationId":"device_state_changed_websocket_api_device_state_changed_post","parameters":[{"description":"\nCredentials supplied from websocket connection. This is\nInternally generated by a websockets authorized connection and\ndoes not form part of the websocket message.\n","required":true,"schema":{"title":"X-Credentials","type":"string","description":"\nCredentials supplied from websocket connection. This is\nInternally generated by a websockets authorized connection and\ndoes not form part of the websocket message.\n"},"name":"X-Credentials","in":"header"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeviceStateChanged"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/websocket/api/bedtime_set":{"post":{"tags":["Websocket Messages"],"summary":"Bedtime Set","description":"\n# Description\n\nThis message is sent from the Adapter to the Backend to acknowledge\nthat the listed devices bedtime schedule was set as required.\n\n## Parameters\n\n- **message**: Report current state of a service on the Adapter.\n    * Constant:  \"bedtime-set\"\n\n- **tstamp**: The response tstamp, as taken from the original command in\nthe case of a reply, OR the tstamp the state changed on the adapter if\nsent asynchronously.\n\n- **id**: NOT Optional, ID Field. The Adapter does not do any processing or\nverification of the ID field, if it is set, it must be returned verbatim\nin the paired reply.\n\n- **devices**: An array of Device MAC addresses the bedtime delay applies to.\nAll devices listed have had the same bedtime delay applied to them.\nOnly after all listed devices have the bedtime delay applied does the\nadapter send the paired reply.\n    * '0': The Devices MAC address. Assumed unique per adapter.\n    Eg. \"00:11:22:33:44:55\" Also accepts \"001122334455\" or \"00-11-22-33-44-55\"\n\n- **schedule**: This is an array for a rotating weeks worth of bedtime schedules.\nThe first element is Monday, the second Tuesday, Wednesday and so on till Sunday.\nThere will ALWAYS be 7 days present if a schedule is set.\n\nIF no schedule is to be set for the specified devices, the schedule field will be\npresent, and will be set to null. This means that no schedule is to apply to the\nlisted devices.\n\nIF any single day does not have a bed time, but other days do, then both the\n\"start\" and \"end\" will be set to 0 (zero).\n* start: This is the time bedtime starts on the specificed day.\nThis time is minutes since midnight of the specified day.\nIF bedtime starts after the subsequent midnight of the specified day,\nthen this time will be greater than 1,440.\nAssuming the specified day is Monday. Example Start Times:\n    * 600 = 10am Monday Morning.\n    * 1,260 = 9pm Monday Night.\n    * 1,350 = 10:30pm Monday Night.\n    * 1,530 = 1:30am Tuesday Morning.\n* end: This is the time bedtime ends on the specificed day.\nThis time is minutes since midnight of the specified day.\nBedtime typically always ends after the subsequent midnight of the\nspecified day, so typically this time will be greater than 1,440.\nstart is always < end. If it is not the schedule is in error and should be\nrejected.\nAssuming the specified day is Monday. Example End Times:\n    * 1,800 = 6am Tuesday Morning.\n","operationId":"bedtime_set_websocket_api_bedtime_set_post","parameters":[{"description":"\nCredentials supplied from websocket connection. This is\nInternally generated by a websockets authorized connection and\ndoes not form part of the websocket message.\n","required":true,"schema":{"title":"X-Credentials","type":"string","description":"\nCredentials supplied from websocket connection. This is\nInternally generated by a websockets authorized connection and\ndoes not form part of the websocket message.\n"},"name":"X-Credentials","in":"header"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BedtimeSet"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/websocket/api/bedtime_delayed":{"post":{"tags":["Websocket Messages"],"summary":"Bedtime Delayed","description":"\n# Description\n\nThis message advises that a bedtime delay has been applied to the devices,\nand the absolute UTC time when the delay will complete.\nIt is sent in response to a [*Delay Bedtime*](#message-DelayBedtime) message from the backend.\n\n## Parameters\n\n- **message**: Report current state of a service on the Adapter.\n    * Constant:  \"bedtime-delayed\"\n\n- **tstamp**: The response tstamp, as taken from the original command in\nthe case of a reply, OR the tstamp the state changed on the adapter if\nsent asynchronously.\n\n- **id**: NOT Optional, ID Field. The Adapter does not do any processing or\nverification of the ID field, if it is set, it must be returned verbatim\nin the paired reply.\n\n- **devices**: An array of Device MAC addresses the bedtime delay applies to.\nAll devices listed have had the same bedtime delay applied to them.\nOnly after all listed devices have the bedtime delay applied does the\nadapter send the paired reply.\n    * '0': The Devices MAC address. Assumed unique per adapter.\n    Eg. \"00:11:22:33:44:55\" Also accepts \"001122334455\" or \"00-11-22-33-44-55\"\n\n- **delay**: The number of minutes we are to delay bedtime for the listed devices\nfor. A delay of zero terminates any currently running delay. Delay time is\nabsolute, from the start of the next/current bedtime. A subsequent delay is NOT\nan additional delay, it replaces the current delay.\n\n- **ends**: This is the absolute unix epoch time when the delay will finish on\nthe adapter for the listed devices.\n","operationId":"bedtime_delayed_websocket_api_bedtime_delayed_post","parameters":[{"description":"\nCredentials supplied from websocket connection. This is\nInternally generated by a websockets authorized connection and\ndoes not form part of the websocket message.\n","required":true,"schema":{"title":"X-Credentials","type":"string","description":"\nCredentials supplied from websocket connection. This is\nInternally generated by a websockets authorized connection and\ndoes not form part of the websocket message.\n"},"name":"X-Credentials","in":"header"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BedtimeDelayed"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/websocket/api/data_usage":{"post":{"tags":["Websocket Messages"],"summary":"Data Usage.","description":"\n# Description\n\nThis message is sent from the Adapter to the Backend every hour and is\nsynchronized to the top of each hour. It reports the data usage for both\nthe Adapter as a whole, and each ACTIVE device within that hour.\n\nIn order to prevent spikes of data hitting the backend at the end of every\nhour, this message should be delayed to be sent for a random interval up to\n10 minutes, after the end of each hour. However, the tstamp field should\nreflect the hour that is being reported, and NOT the time the message was\nactually sent.\n\n## Parameters\n- **message**: Report current state of a service on the Adapter.\n    * Constant:  \"data usage\"\n\n- **tstamp**: The response tstamp, as taken from the original command in\nthe case of a reply, OR the tstamp the state changed on the adapter if\nsent asynchronously.\n\n- **id**: Optional, ID Field. The Adapter does not do any processing or\nverification of the ID field, if it is set, it must be returned verbatim\nin the paired reply.\n\n- **tx**: This is the total number of bytes sent by the Adapter to the\ninternet in the hour.\n\n- **rx**: This is the total number of bytes received by the Adapter\nfrom the internet in the hour.\n\n- **devices**: The list of all devices which were active during the hour\nand transmitted or received data from the internet. Devices which were\nonline, but only transmitted locally are NOT listed. If there were no\nactive devices, this field is omitted.\n    * 'mac': The Devices MAC address. Assumed unique per adapter.\n    Eg. \"00:11:22:33:44:55\" Also accepts\n    \"001122334455\" or \"00-11-22-33-44-55\"\n    * 'tx': This is the total number of bytes sent by the Device to the\n    internet in the hour. Data which was sent locally is not included,\n    only data routed out to the public internet is included.\n    * 'rx': This is the total number of bytes received by the Device from\n    the internet in the hour. Data which was received locally is not\n    included, only data routed in from the public internet to the device\n    is included.\n","operationId":"data_usage_websocket_api_data_usage_post","parameters":[{"description":"\nCredentials supplied from websocket connection. This is\nInternally generated by a websockets authorized connection and\ndoes not form part of the websocket message.\n","required":true,"schema":{"title":"X-Credentials","type":"string","description":"\nCredentials supplied from websocket connection. This is\nInternally generated by a websockets authorized connection and\ndoes not form part of the websocket message.\n"},"name":"X-Credentials","in":"header"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DataUsage"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/websocket/internal/authorize":{"get":{"tags":["Websocket Management Messages"],"summary":"Authorize a Routers presented credentials.","description":"\n# Usage\n\nThis message is called by the websocket handler on connection of the router\nto the websocket.  IF the router can not pass its credential check, it is\nimmediately disconnected from the websocket.  Otherwise it is marked Online\nand credentials are returned to the websocket handler which are included in\nall other accesses.\n\n**NOTE:** This is an INTERNAL USE ONLY Function and can not be sent over the\nwebsocket connection.\n","operationId":"ws_authorize_websocket_internal_authorize_get","parameters":[{"description":"\nThe Mac address of the router attempting to connect.  Must not be a\nBroadcast OR Local mac address.\n","required":true,"schema":{"title":"Mac address to Authorize","type":"string","description":"\nThe Mac address of the router attempting to connect.  Must not be a\nBroadcast OR Local mac address.\n","format":"EUI"},"name":"mac","in":"query"},{"description":"The service ID of the process managing this routers websocket.","required":true,"schema":{"title":"Routers managing service id.","type":"string","description":"The service ID of the process managing this routers websocket."},"name":"service_id","in":"query"},{"description":"The IP address of the process managing this routers websocket.","required":true,"schema":{"title":"Routers managing service ip address.","type":"string","description":"The IP address of the process managing this routers websocket.","format":"IPv4"},"name":"service_ip","in":"query"},{"description":"\nThe Authorization token, provided in the websocket Basic\nauthorization header, which proves this connection is being made by\na valid router.  Will be ignored **ONLY** if the system is running in\ndevelopment mode, **AND** the local mac address bit is set in the \"mac\"\nfield.\n","required":true,"schema":{"title":"Authorization Token","type":"string","description":"\nThe Authorization token, provided in the websocket Basic\nauthorization header, which proves this connection is being made by\na valid router.  Will be ignored **ONLY** if the system is running in\ndevelopment mode, **AND** the local mac address bit is set in the \"mac\"\nfield.\n","format":"URL-Base64","example":"QW4gRXhhbXBsZQ"},"name":"token","in":"query"},{"description":"\nIF this field is set to \"True\" or 1, then the Mac address was sent to\nthe websocket connection as a local mac address.  IF this is a\ndevelopment system, this enables bypass of the token check.\n\nFor non development systems, this must always be \"False\" or 0.\n","required":true,"schema":{"title":"Localized Mac","type":"boolean","description":"\nIF this field is set to \"True\" or 1, then the Mac address was sent to\nthe websocket connection as a local mac address.  IF this is a\ndevelopment system, this enables bypass of the token check.\n\nFor non development systems, this must always be \"False\" or 0.\n"},"name":"localized","in":"query"},{"description":"\nThe WAN facing IP address of the router attempting connection on the\nwebsocket.\n","required":true,"schema":{"title":"Routers connected IP Address.","type":"string","description":"\nThe WAN facing IP address of the router attempting connection on the\nwebsocket.\n","format":"IPv4"},"name":"ip_address","in":"query"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthorizedRouter"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/websocket/internal/notify":{"get":{"tags":["Websocket Management Messages"],"summary":"Sends a notification about a websocket connection.","description":"\n# Usage\n\nThis message is called by the websocket handler on conditions which may\nrequire notification to the client.  Currently, this is limited to the\nrouter being offline for 10 minutes, but can be extended through this\ninternal api call.\n\n**NOTE:** This is an INTERNAL USE ONLY Function and can not be sent over the\nwebsocket connection.\n","operationId":"notify_websocket_internal_notify_get","parameters":[{"description":"\nThe Notification type needed to be sent.  Can be any of:\n\n- \"offline\" : Notify the router has been offline for 10 minutes.\n","required":true,"schema":{"title":"Type of notification to send.","pattern":"^offline$","type":"string","description":"\nThe Notification type needed to be sent.  Can be any of:\n\n- \"offline\" : Notify the router has been offline for 10 minutes.\n"},"name":"notification","in":"query"},{"description":"\nThe Mac address of the router we need to send the notification\nabout.\n","required":true,"schema":{"title":"Mac address to Notify","type":"string","description":"\nThe Mac address of the router we need to send the notification\nabout.\n","format":"EUI"},"name":"mac","in":"query"},{"description":"\nThe service ID of the process managing this routers websocket.\n","required":true,"schema":{"title":"Routers managing service id.","type":"string","description":"\nThe service ID of the process managing this routers websocket.\n"},"name":"service_id","in":"query"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/websocket/internal/offline":{"get":{"tags":["Websocket Management Messages"],"summary":"Handle Router going offline.","description":"\n# Mark the router offline in the router database.\n\n**NOTE:** This is an INTERNAL USE ONLY Function and can not be sent over the\nwebsocket connection.\n","operationId":"offline_websocket_internal_offline_get","parameters":[{"description":"\nCredentials supplied from websocket connection. This is\nInternally generated by a websockets authorized connection and\ndoes not form part of the websocket message.\n","required":true,"schema":{"title":"X-Credentials","type":"string","description":"\nCredentials supplied from websocket connection. This is\nInternally generated by a websockets authorized connection and\ndoes not form part of the websocket message.\n"},"name":"X-Credentials","in":"header"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"AddOns":{"title":"AddOns","required":["id"],"type":"object","properties":{"id":{"title":"Id","type":"string"},"quantity":{"title":"Quantity","type":"integer"},"unit_price":{"title":"Unit Price","type":"integer"},"amount":{"title":"Amount","type":"integer"},"trial_end":{"title":"Trial End","type":"string","format":"date-time"},"remaining_billing_cycles":{"title":"Remaining Billing Cycles","type":"integer"},"quantity_in_decimal":{"title":"Quantity In Decimal","type":"string"},"unit_price_in_decimal":{"title":"Unit Price In Decimal","type":"string"},"amount_in_decimal":{"title":"Amount In Decimal","type":"string"}},"description":"Subscription AddOns object."},"Address":{"title":"Address","type":"object","properties":{"email":{"title":"Email","type":"string"},"first_name":{"title":"First Name","type":"string"},"last_name":{"title":"Last Name","type":"string"},"company":{"title":"Company","type":"string"},"phone":{"title":"Phone","type":"string"},"line1":{"title":"Line1","type":"string"},"line2":{"title":"Line2","type":"string"},"line3":{"title":"Line3","type":"string"},"city":{"title":"City","type":"string"},"state_code":{"title":"State Code","type":"string"},"state":{"title":"State","type":"string"},"country":{"title":"Country","type":"string"},"zip":{"title":"Zip","type":"string"},"validation_status":{"title":"Validation Status","type":"string"}},"description":"Dataclass to hold the ShippingAddress object."},"AllFoundAdaptersReply":{"title":"AllFoundAdaptersReply","type":"array","items":{"$ref":"#/components/schemas/FoundAdapterReply"},"description":"A List of all found adapters.  Will be empty list if none could be found."},"AnyBody":{"title":"AnyBody","type":"object","properties":{},"description":"Accept anything."},"AuthConfig":{"title":"AuthConfig","type":"object","properties":{"jti_app":{"title":"Jti App","type":"string","description":"JTI Value embedded inside App Tokens.","format":"uuid","default":"6568a4d7-90ac-4324-b2e8-8aeec4d6b15c"},"jti_client":{"title":"Jti Client","type":"string","description":"JTI Value embedded inside Client Tokens.","format":"uuid","default":"cbd62b8d-cb17-4dc3-9509-28202937adf2"},"jti_admin":{"title":"Jti Admin","type":"string","description":"JTI Value embedded inside Admin Tokens.","format":"uuid","default":"422a18b2-e4bd-4801-9c9d-6dfc425324a9"},"jwt_app_key":{"title":"Jwt App Key","type":"string","description":"Signing Key which signs App Tokens.","format":"password","writeOnly":true},"jwt_user_key":{"title":"Jwt User Key","type":"string","description":"Signing Key which signs User/Validation Tokens.","format":"password","writeOnly":true},"email_validity":{"title":"Email Validity","type":"number","description":"How long tokens in an email remain valid for.","format":"time-delta"},"admin_email_whitelist":{"title":"Admin Email Whitelist","type":"array","items":{"type":"string"},"description":"The list of email addresses (globbed) which are only used for admin accounts.","default":["*@privacyhero.com"]}},"description":"Authorization API Configuration."},"Authorized":{"title":"Authorized","required":["bearer","renew","exp"],"type":"object","properties":{"bearer":{"title":"Bearer Token","maxLength":1024,"minLength":64,"pattern":"^([A-Za-z0-9-_])+\\.([A-Za-z0-9-_])+(\\.[A-Za-z0-9-_]+)?$","type":"string","description":"Privacy Hero 2 API Bearer Token (Based on JWT)"},"renew":{"title":"Renewal Time","type":"integer","description":"\nThis is the absolute unix epoch time before which this token must be\nrenewed.  Renewal after this time is not possible.\n"},"exp":{"title":"Expiry Time","type":"integer","description":"\nThis is the absolute unix epoch time before which this token remains\nvalid.  After this time, this token will be considered invalid.\n"},"admin":{"title":"Is the user an admin?","type":"boolean","description":"\n**true**=The logged in user is an Admin user. If not present, the client\nis a normal user.  This field is only present and must be **true** IF\nthe user is an Admin.\n"},"impersonator":{"title":"Impersonating Administrator ID","type":"string","description":"\nThis is the email address of the admin who is impersonating the current\nuser.\n","format":"email"}},"description":"Authorized Authentication Response. Used by many endpoints."},"AuthorizedRouter":{"title":"AuthorizedRouter","required":["id","ws_service","ws_ip","mac"],"type":"object","properties":{"id":{"title":"Routers Unique ID","type":"string","description":"The system wide unique ID of the router that authenticated.","format":"uuid"},"ws_service":{"title":"Websocket Service.","type":"string","description":"ID of the Service managing the websocket."},"ws_ip":{"title":"Websocket Service IP Address.","type":"string","description":"IP of the Service managing the websocket.","format":"IPv4"},"mac":{"title":"Routers authorized MAC address.","type":"string","description":"Routers authorized MAC address.","format":"EUI"},"location":{"title":"Routers Geographic Location","allOf":[{"$ref":"#/components/schemas/GeoIPModel"}],"description":"The routers geographic location information."}},"description":"Authorized Authentication Response. Used by many endpoints."},"Balances":{"title":"Balances","required":["promotional_credits","excess_payments","refundable_credits","unbilled_charges","currency_code"],"type":"object","properties":{"promotional_credits":{"title":"Promotional Credits","type":"integer"},"excess_payments":{"title":"Excess Payments","type":"integer"},"refundable_credits":{"title":"Refundable Credits","type":"integer"},"unbilled_charges":{"title":"Unbilled Charges","type":"integer"},"currency_code":{"title":"Currency Code","type":"string"}},"description":"Customer Balances object."},"BaseWifiConfig":{"title":"BaseWifiConfig","required":["enabled"],"type":"object","properties":{"enabled":{"title":"Enabled","type":"boolean","description":"\nIs the WIFI Enabled or Not.\n","example":true},"band":{"allOf":[{"$ref":"#/components/schemas/WifiBand"}],"description":"\nThe Frequency band the Radio operates in.\n","example":"5Ghz"},"ssid":{"title":"Ssid","maxLength":32,"minLength":1,"pattern":"^[^!#;+\\]\\/\"\\t][^+\\]\\/\"\\t]{0,30}[^ !#;+\\]\\/\"\\t]$|^[^ !#;+\\]\\/\"\\t]$","type":"string","description":"\nThe name of the wifi network.\nDefault: \"PrivacyHero\"\n","default":"Privacy Hero","example":"Privacy Hero"},"key":{"title":"Key","maxLength":63,"minLength":8,"pattern":"^[ -~]{8,63}$","type":"string","description":"\nThe network password (if defined).\n","example":"pher0123"},"channel":{"title":"Channel","type":"integer","description":"\nThe preferred channel. Default to Auto, if not present or set to -1.\n","example":"13"},"bandwidth":{"title":"Bandwidth","type":"integer","description":"\nThe preferred channel bandwidth. Default to Max, if not present or set to -1.\n","example":"100"}},"description":"Configuration for wifi."},"BedtimeDelayed":{"title":"BedtimeDelayed","required":["tstamp","id","devices","delay","ends"],"type":"object","properties":{"message":{"title":"message","type":"string","description":"\nReport current state of a service on the Adapter.\n* Constant:  \"adapter-services-state\"\n","example":"bedtime delayed"},"tstamp":{"title":"tstamp","type":"integer","description":"\nThe response tstamp, as taken from the original command in\nthe case of a reply, OR the tstamp the state changed on the adapter if\nsent asynchronously.\n","example":1592217870123},"id":{"title":"id","minLength":1,"type":"string","description":"\nNOT Optional, ID Field. The Adapter does not do any processing or\nverification of the ID field, if it is set, it must be returned verbatim\nin the paired reply.\n","example":"eyJ0aGlzIjoiaXMiLCJhbiI6ImV4YW1wbGUiLCJpZCI6ZmllbGQifQ"},"devices":{"title":"devices","minItems":1,"type":"array","items":{"type":"string","format":"EUI","examples":["8c:89:a5:0f:ce:c6"]},"description":"\nAn array of Device MAC addresses the bedtime delay applies to.\nAll devices listed have had the same bedtime delay applied to them.\nOnly after all listed devices have the bedtime delay applied does the\nadapter send the paired reply.\n* 0: The Devices MAC address. Assumed unique per adapter.\nEg. \"00:11:22:33:44:55\" Also accepts \"001122334455\" or \"00-11-22-33-44-55\"\n","example":["8c:89:a5:0f:ce:c6"]},"delay":{"title":"delay","type":"integer","description":"\nThe number of minutes we are to delay bedtime for the listed devices\nfor. A delay of zero terminates any currently running delay. Delay\ntime is absolute, from the start of the next/current bedtime. A\nsubsequent delay is NOT an additional delay, it replaces the current\ndelay.\n","example":30},"ends":{"title":"ends","type":"integer","description":"\nThis is the absolute unix epoch time when the delay will finish on\nthe adapter for the listed devices.\n","example":1592217980}},"description":"Bedtime Delayed message body."},"BedtimeSchedule":{"title":"BedtimeSchedule","required":["start","end"],"type":"object","properties":{"start":{"title":"start","type":"integer","description":"\nThis is the time bedtime starts on the specificed day.\nThis time is minutes since midnight of the specified day.\nIF bedtime starts after the subsequent midnight of the specified day,\nthen this time will be greater than 1,440.\n","example":1260},"end":{"title":"ends","type":"integer","description":"\nThis is the time bedtime ends on the specificed day.\nThis time is minutes since midnight of the specified day.\nBedtime typically always ends after the subsequent midnight of the\nspecified day,\nso typically this time will be greater than 1,440.\nstart is always < end. If it is not the schedule is in error and should be\nrejected.\n\n","example":1800}},"description":"A bedtime schedule day."},"BedtimeSet":{"title":"BedtimeSet","required":["tstamp","id","devices","schedule"],"type":"object","properties":{"message":{"title":"message","type":"string","description":"\nReport current state of a service on the Adapter.\n* Constant:  \"adapter-services-state\"\n","example":"bedtime set"},"tstamp":{"title":"tstamp","type":"integer","description":"\nThe response tstamp, as taken from the original command in\nthe case of a reply, OR the tstamp the state changed on the adapter if\nsent asynchronously.\n","example":1592217870123},"id":{"title":"id","minLength":1,"type":"string","description":"\nNOT Optional, ID Field. The Adapter does not do any processing or\nverification of the ID field, if it is set, it must be returned verbatim\nin the paired reply.\n","example":"eyJ0aGlzIjoiaXMiLCJhbiI6ImV4YW1wbGUiLCJpZCI6ZmllbGQifQ"},"devices":{"title":"devices","minItems":1,"type":"array","items":{"type":"string","format":"EUI","examples":["8c:89:a5:0f:ce:c6"]},"description":"\nAn array of Device MAC addresses the bedtime delay applies to.\nAll devices listed have had the same bedtime delay applied to them.\nOnly after all listed devices have the bedtime delay applied does the\nadapter send the paired reply.\n* 0: The Devices MAC address. Assumed unique per adapter.\nEg. \"00:11:22:33:44:55\" Also accepts \"001122334455\" or \"00-11-22-33-44-55\"\n","example":["8c:89:a5:0f:ce:c6"]},"schedule":{"title":"schedule","type":"array","items":{"$ref":"#/components/schemas/BedtimeSchedule"},"description":"\nThis is an array for a rotating weeks worth of bedtime schedules. The\nfirst element is Monday, the second Tuesday, Wednesday and so on till\nSunday. There will ALWAYS be 7 days present if a schedule is set.\n","example":[{"start":1260,"end":1800},{"start":1260,"end":1800},{"start":1260,"end":1800},{"start":1260,"end":1800},{"start":1350,"end":1800},{"start":1350,"end":1800},{"start":1260,"end":1800}]}},"description":"Bedtime Set message body."},"BonjourData":{"title":"BonjourData","required":["name"],"type":"object","properties":{"name":{"title":"Name","minLength":1,"type":"string","description":"\nThe name of a device discovered via Bonjour.\n"},"services":{"title":"Services","minItems":1,"type":"array","items":{"$ref":"#/components/schemas/BonjourService"},"description":"\nThe List of service types reported by the UPNP\nData of this internal device.\neg: [\"urn:schemas-upnp-org:service:Layer3Forwarding:1\"]\n    * '0': Individual Service Type Entry.\n"}},"description":"Bonjour metadata information."},"BonjourService":{"title":"BonjourService","required":["name"],"type":"object","properties":{"name":{"title":"Name","minLength":1,"type":"string","description":"\nThe name of a service discovered on the device via Bonjour.\n"},"txt":{"title":"Txt","minItems":1,"type":"array","items":{"type":"string","minLength":1},"description":"\nThe TXT record from Answers or Additional records.\n"}},"description":"A single bonjour service."},"BrowserExtensionCommand":{"title":"BrowserExtensionCommand","required":["message"],"type":"object","properties":{"message":{"$ref":"#/components/schemas/BrowserExtensionCommands"},"state":{"title":"State","type":"boolean","description":"\nThe state to set for the command. (ie, \"adblocking\")\n- **true** = adblocking is enabled (ads will be blocked).\n- **false** = adblocking is disabled (ads will NOT be blocked).\n- **null** = no change or state is unreportable.\n"},"timeout":{"title":"Timeout","type":"integer","description":"\nThe number of seconds to set the state for, before automatically switching to\nthe opposite state.  This is optional, if not included the state will be set\npermanently.\n"}},"description":"Browser Extension Command."},"BrowserExtensionCommands":{"title":"BrowserExtensionCommands","enum":["adblocking"],"type":"string","description":"Possible Browser Extension Commands."},"BrowserExtensionState":{"title":"BrowserExtensionState","required":["message"],"type":"object","properties":{"message":{"$ref":"#/components/schemas/BrowserExtensionCommands"},"state":{"title":"State","type":"boolean","description":"\nThe state to set for the command. (ie, \"adblocking\")\n- **true** = adblocking is enabled (ads will be blocked).\n- **false** = adblocking is disabled (ads will NOT be blocked).\n- **null** = no change or state is unreportable.\n"}},"description":"Browser Extension State."},"CarouselConfig":{"title":"CarouselConfig","type":"object","properties":{"template_dir":{"title":"Template Dir","type":"string","description":"The directory where the carousel templates are stored internally","default":"/data/"},"delay":{"title":"Delay","type":"number","description":"Default delay for a carousel page.","format":"time-delta"}},"description":"Carousel API Configuration."},"ChargebeeConfig":{"title":"ChargebeeConfig","type":"object","properties":{"api_key":{"title":"Api Key","type":"string","description":"The API Key needed to call Chargebee REST API functions.","format":"password","writeOnly":true},"site":{"title":"Site","type":"string","description":"The API Username needed to call Chargebee REST API functions.","default":"streamlocatorbilling-test"},"callback_user":{"title":"Callback User","type":"string","description":"The Username chargebee uses to callback to our backend.","default":"chargebee"},"callback_pwd":{"title":"Callback Pwd","type":"string","description":"The Password chargebee uses to authenticate its callback to our backend.","format":"password","writeOnly":true}},"description":"Chargebee API Configuration."},"ChargebeeWebhookEvent":{"title":"ChargebeeWebhookEvent","required":["api_version","event_type","id","object","occurred_at","source","user","webhook_status","content"],"type":"object","properties":{"api_version":{"title":"Api Version","type":"string","description":"Chargebee API Version"},"event_type":{"title":"Event Type","type":"string","description":"Chargebee Event Name"},"id":{"title":"Id","type":"string","description":"Chargebee Event Id"},"object":{"title":"Object","type":"string","description":"Chargebee Event Object Type"},"occurred_at":{"title":"Occurred At","type":"string","description":"Time the event occurred","format":"date-time"},"source":{"title":"Source","type":"string","description":"Chargebee Event Source"},"user":{"title":"User","type":"string","description":"Chargebee User"},"webhook_status":{"title":"Webhook Status","type":"string","description":"Chargebee Webhook Status"},"content":{"title":"Content","allOf":[{"$ref":"#/components/schemas/Content"}],"description":"Chargebee Event Data"}},"description":"Models the Chargebee webhook event."},"ChargedEventBasedAddons":{"title":"ChargedEventBasedAddons","required":["id","last_charged_at"],"type":"object","properties":{"id":{"title":"Id","type":"string"},"last_charged_at":{"title":"Last Charged At","type":"string","format":"date-time"}},"description":"Subscription Charged Event Based Addons object."},"ChgemailBody":{"title":"ChgemailBody","required":["email","callback"],"type":"object","properties":{"email":{"title":"Email Address","type":"string","description":"\nThe Email address the customer wishes to register as a new customer.\n","format":"email"},"callback":{"title":"The callback URL","maxLength":65536,"minLength":1,"type":"string","description":"\nLinked, in the email to the customer, for validation.\n\nThe Link in the users email will have two or three query parameters\nappended to this URL.\n\nOf the form:\n\n    ?verify=<verify token>\n    &exp=<token expiry time>\n    &pwd=<not present=true, true or false>\n","format":"uri"},"cheat":{"title":"Cheat","type":"boolean","description":"Never use or set this field."}},"description":"New Customer message body.","example":{"email":"newemail@email.org","callback":"https://www.myapp.url/callback"}},"ChgpwdBody":{"title":"ChgpwdBody","required":["old","new"],"type":"object","properties":{"old":{"title":"Password","maxLength":64,"minLength":8,"pattern":"^[ -~]*$","type":"string","description":"\nThe old password of the Client. Must be Valid.\n","example":"4n 0ld p455w0rd"},"new":{"title":"Password","maxLength":64,"minLength":8,"pattern":"^[ -~]*$","type":"string","description":"\nThe new password of the Client.\n","example":"my n3w p455w0rd"}},"description":"Confirm Customer message body."},"ConfigOptions":{"title":"ConfigOptions","required":["environment","config"],"type":"object","properties":{"environment":{"$ref":"#/components/schemas/EnvironmentSettings"},"config":{"$ref":"#/components/schemas/GlobalConfig"}},"description":"Configuration we can set."},"ConfirmCustomerBody":{"title":"ConfirmCustomerBody","required":["verify"],"type":"object","properties":{"verify":{"title":"Verify","maxLength":1024,"minLength":64,"pattern":"^([A-Za-z0-9-_])+\\.([A-Za-z0-9-_])+(\\.[A-Za-z0-9-_]+)?$","type":"string","description":"\nThe token passed to the callback which invoked this API call.\n","example":"AeyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE1MTYyMzkwMjJ9AB"},"pwd":{"title":"Password","maxLength":64,"minLength":8,"pattern":"^[ -~]*$","type":"string","description":"\nThe clients chosen password. This should only be provided if the\ncallback specified that a password was required.\n","example":"my p455w0rd"},"expchk":{"title":"Token Expiry Check","type":"boolean","description":"\nToken Expiry Check. Will not execute the confirmation,\ninstead will reply with a 202 IF the operation would have succeeded.\nThe backend will not do any updates if expchk is set, so,\nfor confirmations that require a password,\nthe pwd field should be set with a valid placeholder.\n","default":false,"nullable":true}},"description":"Confirm Customer message body."},"Contacts":{"title":"Contacts","required":["email"],"type":"object","properties":{"id":{"title":"Id","type":"string"},"email":{"title":"Email","type":"string"},"enabled":{"title":"Enabled","type":"boolean","default":false},"send_account_email":{"title":"Send Account Email","type":"boolean","default":false},"send_billing_email":{"title":"Send Billing Email","type":"boolean","default":false},"first_name":{"title":"First Name","type":"string"},"last_name":{"title":"Last Name","type":"string"},"phone":{"title":"Phone","type":"string"},"label":{"title":"Label","type":"string"}},"description":"Customer Contacts object."},"Content":{"title":"Content","type":"object","properties":{"subscription":{"$ref":"#/components/schemas/Subscription"},"customer":{"$ref":"#/components/schemas/Customer"},"card":{"title":"Card","type":"object","description":"Card Information"},"invoice":{"title":"Invoice","type":"object","description":"Invoice Information"},"creditnotes":{"title":"Creditnotes","type":"object","description":"Credit Note Information"}},"description":"The content field of ChargeBee events.\n\nwe use this object for all the event data."},"ContractTerm":{"title":"ContractTerm","required":["id","status","contract_start","contract_end","billing_cycle","action_at_term_end","total_contract_value","subscription_id","created_at"],"type":"object","properties":{"id":{"title":"Id","type":"string"},"status":{"title":"Status","type":"string"},"contract_start":{"title":"Contract Start","type":"string","format":"date-time"},"contract_end":{"title":"Contract End","type":"string","format":"date-time"},"billing_cycle":{"title":"Billing Cycle","type":"integer"},"action_at_term_end":{"title":"Action At Term End","type":"string"},"total_contract_value":{"title":"Total Contract Value","type":"integer"},"subscription_id":{"title":"Subscription Id","type":"string"},"created_at":{"title":"Created At","type":"string","format":"date-time"},"cancellation_cutoff_period":{"title":"Cancellation Cutoff Period","type":"integer"},"remaining_billing_cycles":{"title":"Remaining Billing Cycles","type":"integer"}},"description":"Subscription Contract Term object."},"Customer":{"title":"Customer","required":["id","auto_collection","net_term_days","promotional_credits","unbilled_charges","refundable_credits","excess_payments","deleted","object"],"type":"object","properties":{"id":{"title":"Id","type":"string"},"auto_collection":{"title":"Auto Collection","type":"string"},"net_term_days":{"title":"Net Term Days","type":"integer"},"promotional_credits":{"title":"Promotional Credits","type":"integer"},"unbilled_charges":{"title":"Unbilled Charges","type":"integer"},"refundable_credits":{"title":"Refundable Credits","type":"integer"},"excess_payments":{"title":"Excess Payments","type":"integer"},"deleted":{"title":"Deleted","type":"boolean"},"object":{"title":"Object","type":"string"},"allow_direct_debit":{"title":"Allow Direct Debit","type":"boolean","default":false},"first_name":{"title":"First Name","type":"string"},"last_name":{"title":"Last Name","type":"string"},"email":{"title":"Email","type":"string"},"phone":{"title":"Phone","type":"string"},"company":{"title":"Company","type":"string"},"vat_number":{"title":"Vat Number","type":"string"},"offline_payment_method":{"title":"Offline Payment Method","type":"string"},"vat_number_validated_time":{"title":"Vat Number Validated Time","type":"string","format":"date-time"},"vat_number_status":{"title":"Vat Number Status","type":"string"},"is_location_valid":{"title":"Is Location Valid","type":"boolean"},"created_at":{"title":"Created At","type":"string","format":"date-time"},"created_from_ip":{"title":"Created From Ip","type":"string","format":"IPv4"},"taxability":{"title":"Taxability","type":"string"},"entity_code":{"title":"Entity Code","type":"string"},"exempt_number":{"title":"Exempt Number","type":"string"},"resource_version":{"title":"Resource Version","type":"integer"},"updated_at":{"title":"Updated At","type":"string","format":"date-time"},"locale":{"title":"Locale","type":"string"},"billing_date":{"title":"Billing Date","type":"integer"},"billing_date_mode":{"title":"Billing Date Mode","type":"string"},"billing_day_of_week":{"title":"Billing Day Of Week","type":"string"},"billing_day_of_week_mode":{"title":"Billing Day Of Week Mode","type":"string"},"pii_cleared":{"title":"Pii Cleared","type":"string"},"fraud_flag":{"title":"Fraud Flag","type":"string"},"primary_payment_source_id":{"title":"Primary Payment Source Id","type":"string"},"backup_payment_source_id":{"title":"Backup Payment Source Id","type":"string"},"invoice_notes":{"title":"Invoice Notes","type":"string"},"preferred_currency_code":{"title":"Preferred Currency Code","type":"string"},"registered_for_gst":{"title":"Registered For Gst","type":"boolean"},"consolidated_invoicing":{"title":"Consolidated Invoicing","type":"boolean"},"customer_type":{"title":"Customer Type","type":"string"},"business_customer_without_vat_number":{"title":"Business Customer Without Vat Number","type":"boolean"},"client_profile_id":{"title":"Client Profile Id","type":"string"},"use_default_hierarchy_settings":{"title":"Use Default Hierarchy Settings","type":"boolean","default":true},"billing_address":{"$ref":"#/components/schemas/Address"},"referral_urls":{"title":"Referral Urls","type":"array","items":{"$ref":"#/components/schemas/ReferralUrls"}},"contacts":{"title":"Contacts","type":"array","items":{"$ref":"#/components/schemas/Contacts"}},"payment_method":{"$ref":"#/components/schemas/PaymentMethod"},"balances":{"title":"Balances","type":"array","items":{"$ref":"#/components/schemas/Balances"}},"relationship":{"$ref":"#/components/schemas/Relationship"},"parent_account_access":{"$ref":"#/components/schemas/ParentAccountAccess"},"card_status":{"title":"Card Status","type":"string"}},"description":"Dataclass for holding Customer information from Chargebee."},"DBConfig":{"title":"DBConfig","type":"object","properties":{"url":{"title":"Url","maxLength":65536,"minLength":1,"type":"string","description":"URL:Port of the database server.","format":"uri"},"name":{"title":"Name","type":"string","description":"Name of the database on the server to use.","default":"phero2_app"},"username":{"title":"Username","type":"string","description":"Connection Username.","default":"phero2_app"},"password":{"title":"Password","type":"string","description":"Connection Password.","format":"password","writeOnly":true},"max_connections":{"title":"Max Connections","type":"integer","description":"Maximum simultaneous db connections we can make in this server.","default":32},"stale_timeout":{"title":"Stale Timeout","type":"integer","description":"How long a single connection may be continuously reused.","default":300},"timeout":{"title":"Timeout","type":"integer","description":"When trying to use the database and no connections are available, how long to wait before throwing an error. 0=wait forever.","default":5}},"description":"SQL Database Configuration."},"DHCPData":{"title":"DHCPData","required":["hostname"],"type":"object","properties":{"hostname":{"title":"Hostname","maxLength":255,"minLength":1,"type":"string","description":"\nThe Hostname the Device declared itself as. IF the\n    device did not declare itself with a hostname, the adapter\n    should synthesize a hostname for it. This hostname supplied to the\n    backend should be the hostname only part and not include the\n    network suffix. ie, if the device declared itself as \"MyPS5\" and\n    the local lan suffix is \"lan\" the hostname sent should be \"MyPS5\".\n    This is Option 12 from the DHCP Request.\n"},"class":{"title":"Class","minLength":1,"type":"string","description":"\nOptional. The class of device discovered from DHCP. Can\n    be omitted from the message if no class was provided by the device.\n    This is option 60 from the DHCP Request.\n"},"clientid":{"title":"Clientid","minLength":1,"type":"string","description":"\nOptional. The client id of device discovered from DHCP.\nCan be omitted from the message if no client id was provided by the\ndevice. This is option 61 from the DHCP Request.\n"},"parameters":{"title":"Parameters","minLength":1,"type":"string","description":"\nOptional. The Parameter list the client requested be\nreturned to it's dhcp request. This is option 55 from the DHCP\nRequest.\n"}},"description":"DHCP metadata information."},"DataUsage":{"title":"DataUsage","required":["tstamp","tx","rx"],"type":"object","properties":{"message":{"title":"Message","type":"string","description":"\nReport current state of a service on the Adapter.\n* Constant:  \"data usage\"\n","example":"data usage"},"tstamp":{"title":"tstamp","type":"integer","description":"\nThe response timestamp, as taken from the original request in the case\nof a reply, OR the timestamp the state changed/message was queued on the\nadapter if sent asynchronously.  The timestamp when generated is to be\nthe current unix epoch (UTC) to milliseconds.\n","example":1592217870123},"id":{"title":"id","minLength":1,"type":"string","description":"\nOptional, ID Field. The Adapter does not do any processing or\nverification of the ID field, if it is set, it must be returned verbatim\nin the paired reply.\n","example":"eyJ0aGlzIjoiaXMiLCJhbiI6ImV4YW1wbGUiLCJpZCI6ZmllbGQifQ"},"devices":{"title":"devices","minItems":1,"type":"array","items":{"$ref":"#/components/schemas/DeviceUsage"},"description":"\nThe list of all devices which were active during the hour\nand transmitted or received data from the internet. Devices which were\nonline, but only transmitted locally are NOT listed. If there were no\nactive devices, this field is omitted.\n","default":[]},"tx":{"title":"tx","type":"integer","description":"\nThis is the total number of bytes sent by the Adapter to the\ninternet in the hour.\n","example":30000},"rx":{"title":"rx","type":"integer","description":"\nThis is the total number of bytes received by the Adapter\nfrom the internet in the hour.\n","example":30000}},"description":"Data usage message body."},"DataUsageConfig":{"title":"DataUsageConfig","type":"object","properties":{"max_age":{"title":"Max Age","type":"number","description":"Maximum time we will keep datausage records for a router.","format":"time-delta"},"max_report":{"title":"Max Report","type":"number","description":"Maximum time we will report data usage for.","format":"time-delta"},"warn_less_than_projection":{"title":"Warn Less Than Projection","type":"number","description":"Needs a description about what this configures.","format":"time-delta"},"warn_more_than_projection":{"title":"Warn More Than Projection","type":"number","description":"Needs a description about what this configures.","format":"time-delta"},"warn_not_enough_records":{"title":"Warn Not Enough Records","type":"number","description":"Needs this many records in the past to predict usage.","format":"time-delta"}},"description":"Data Usage Configuration."},"DelcustomerBody":{"title":"DelcustomerBody","required":["email","callback"],"type":"object","properties":{"email":{"title":"Email Address","type":"string","description":"\nThe Email address the customer wishes to delete their account with.\n","format":"email"},"callback":{"title":"The callback URL","maxLength":65536,"minLength":1,"type":"string","description":"\nLinked, in the email to the customer, for validation.\n\nThe Link in the users email will have two or three query parameters\nappended to this URL.\n\nOf the form:\n\n    ?verify=<verify token>\n    &exp=<token expiry time>\n    &pwd=<not present=true, true or false>\n","format":"uri"},"cheat":{"title":"Cheat","type":"boolean","description":"Never use or set this field."}},"description":"Delete customer message body.","example":{"email":"accountemail@email.org","callback":"https://www.myapp.url/callback"}},"DelcustomerResponse":{"title":"DelcustomerResponse","type":"object","properties":{"msg":{"title":"Msg","type":"string","default":"Email sent to customer, OK."}},"description":"Change email Response."},"DeviceInfo":{"title":"DeviceInfo","required":["tstamp","mac","ipv4","online","meta"],"type":"object","properties":{"message":{"title":"Message","type":"string","description":"\nAdvise the Backend that the Device has been discovered or\nhas changed.\n    * Constant:  \"device info\"\n","example":"device info"},"tstamp":{"title":"tstamp","type":"integer","description":"\nThe response timestamp, as taken from the original request in the case\nof a reply, OR the timestamp the state changed/message was queued on the\nadapter if sent asynchronously.  The timestamp when generated is to be\nthe current unix epoch (UTC) to milliseconds.\n","example":1592217870123},"id":{"title":"id","type":"string","description":"\nOptional, ID Field. The Adapter does not do any processing or\nverification of the ID field, if it is set, it must be returned verbatim\nin the paired reply.\n","example":"eyJ0aGlzIjoiaXMiLCJhbiI6ImV4YW1wbGUiLCJpZCI6ZmllbGQifQ"},"mac":{"title":"mac","type":"string","description":"\nThe Devices MAC address. Assumed unique per adapter. Eg.\n\"00:11:22:33:44:55\" Also accepts \"001122334455\" or \"00-11-22-33-44-55\"\n","format":"EUI","example":"8c:89:a5:0f:ce:c6"},"ipv4":{"title":"ipv4","type":"string","description":"\nThe IPv4 Address assigned to this Device. Alternatively, if the\ndevice is using a fixed IP and not one assigned by DHCP, the IP address it\nwas discovered to be using.\n","format":"IPv4","example":"192.168.0.21"},"ipv6":{"title":"ipv6","type":"string","description":"\nOptional: The IPv6 Address assigned to this Device.\nAlternatively, if the device is using a fixed IPv6 and not one assigned by\nDHCP, the IP address it was discovered to be using.\n","format":"IPv6","example":"fe80::dead:beef"},"connection":{"title":"Connection","minLength":1,"type":"string","description":"\nOptional: The port the device connected on. IF not sent,\nit is interpreted as \"Unknown\". Valid values are \"lan\", \"wifi2\" and \"wifi5\".\n\"lan\" = Device was discovered over the wired lan port.\n\"wifi2\" = Device was discovered on the 2.4Ghz Wifi connection to the router.\n\"wifi5\" = Device was discovered on the 5ghz Wifi connection to the router.\nIF the connection value is sent but is not one of these, the backend will\nrecord the connection as \"unknown\". This field is NOT case sensitive.\n","default":"unknown","example":"unknown"},"guest":{"title":"Guest","type":"boolean","description":"\nOptional: If sent, AND set to true, the device was discovered\non a \"guest\" network connection and not the main network.\n","default":false,"example":false},"online":{"title":"Online","type":"boolean","description":"\nCurrent known Online state for the device. This is the ONLY\nfield whose change of value would not cause a new \"device info\" message to\nbe sent. If a device falls offline or comes back online, the \"device state\"\nmessage should be sent.\n","example":false},"meta":{"title":"Meta","allOf":[{"$ref":"#/components/schemas/DeviceMetadata"}],"description":"\nmetadata discovered about the device.\n"}},"description":"Device info message body."},"DeviceMetadata":{"title":"DeviceMetadata","required":["dhcp"],"type":"object","properties":{"dhcp":{"title":"Dhcp","allOf":[{"$ref":"#/components/schemas/DHCPData"}],"description":"\nDHCP Data discovered about the device.\n"},"upnp":{"title":"Upnp","allOf":[{"$ref":"#/components/schemas/UPNPData"}],"description":"\nOptional. IF a upnp xml device metadata can be retrieved from a\ndevice then it is to be sent in this sub field, otherwise it is\nomitted. It is possible for a single physical device to report as\nmultiple internal upnp devices. Each discovered internal upnp device\nis reported in this array.\n"},"snmp":{"title":"Snmp","allOf":[{"$ref":"#/components/schemas/SNMPData"}],"description":"\nOptional. If SNMP metadata can be obtained/probed for a device,\nit is sent in this field, otherwise it is omitted.\n"},"bonjour":{"title":"Bonjour","allOf":[{"$ref":"#/components/schemas/BonjourData"}],"description":"\nOptional. If BONJOUR metadata can be obtained/probed for a\ndevice, it is sent in this field, otherwise it is omitted.\n"},"smb":{"title":"Smb","allOf":[{"$ref":"#/components/schemas/SMBData"}],"description":"\nOptional. If SMB/Netbios metadata can be obtained/probed for a\ndevice, it is sent in this field, otherwise it is omitted.\n"},"hua":{"title":"Hua","allOf":[{"$ref":"#/components/schemas/HUAData"}],"description":"\nOptional. HTTP User Agents discovered for the device, otherwise it\nis omitted.\n"}},"description":"All device metadata."},"DeviceService":{"title":"DeviceService","required":["service","state"],"type":"object","properties":{"service":{"title":"service name","allOf":[{"$ref":"#/components/schemas/Services"}],"description":"\nThe service/filter on the device which changed state.\n","example":"adblocking"},"state":{"title":"state","type":"boolean","description":"\n* true - The service/filter is enabled.\n* false - The service/filter is disabled.\n","example":true},"finishes":{"title":"tstamp","type":"integer","description":"\nOPTIONAL, and ONLY INCLUDED when a timeout is supplied for\nthe state, this field in the reply specifies when the timed operation will\ncomplete. It is the Unix Epoch Date/Time as seconds since midnight 1970 UTC.\n","example":1592217870}},"description":"A single device service state change object."},"DeviceStateChanged":{"title":"DeviceStateChanged","required":["tstamp","devices","states"],"type":"object","properties":{"message":{"title":"Message","type":"string","description":"\nReport current state of a service on the Adapter.\n* Constant:  \"data usage\"\n","example":"device state changed"},"tstamp":{"title":"tstamp","type":"integer","description":"\nThe response timestamp, as taken from the original request in the case\nof a reply, OR the timestamp the state changed/message was queued on the\nadapter if sent asynchronously.  The timestamp when generated is to be\nthe current unix epoch (UTC) to milliseconds.\n","example":1592217870123},"id":{"title":"id","type":"string","description":"\nOptional, ID Field. The Adapter does not do any processing or\nverification of the ID field, if it is set, it must be returned verbatim\nin the paired reply.\n","example":"eyJ0aGlzIjoiaXMiLCJhbiI6ImV4YW1wbGUiLCJpZCI6ZmllbGQifQ"},"devices":{"title":"devices","minItems":1,"type":"array","items":{"type":"string","format":"EUI","examples":["8c:89:a5:0f:ce:c6"]},"description":"\nAn array of Device MAC addresses the state changes were\napplied to. All devices listed had the same state change made as listed\nin this message.\n    * 'mac': The Devices MAC address. Assumed unique per adapter.\n    Eg. \"00:11:22:33:44:55\" Also accepts\n    \"001122334455\" or \"00-11-22-33-44-55\"\n","example":["8c:89:a5:0f:ce:c6"]},"states":{"title":"services","minItems":1,"type":"array","items":{"$ref":"#/components/schemas/DeviceService"},"description":"\nThe array of services and states that change. If this is a\nreply to the Change Device State command from the backend, then it lists\nthe same states that were requested by the backend. If asynchronous state\nchanges occur, the actual changes that ocurred are listed only.\n"}},"description":"Device state changed message body."},"DeviceUsage":{"title":"DeviceUsage","required":["mac","tx","rx"],"type":"object","properties":{"mac":{"title":"mac","type":"string","description":"\nThe mac address of the active device being reported.\n","format":"EUI","example":"8c:89:a5:0f:ce:c6"},"tx":{"title":"tx","type":"integer","description":"\nThis is the total number of bytes sent by the Device to the\ninternet in the hour. Data which was sent locally is not included,\nonly data routed out to the public internet is included.\n","example":30000},"rx":{"title":"rx","type":"integer","description":"\nThis is the total number of bytes received by the Device from\nthe internet in the hour. Data which was received locally is not\nincluded, only data routed in from the public internet to the device\nis included.\n","example":30000}},"description":"A device usage record."},"EnvironmentSettings":{"title":"EnvironmentSettings","type":"object","properties":{"stage":{"allOf":[{"$ref":"#/components/schemas/ValidStages"}],"description":"The stage, must be \"dev\", \"qa\" or \"prod\"","default":"dev"},"db_url":{"title":"Db Url","maxLength":65536,"minLength":1,"type":"string","description":"Primary Database Hostname.","format":"uri","default":"localhost"},"db_name":{"title":"Db Name","type":"string","description":"Primary Database Name.","default":"phero2_app"},"db_user":{"title":"Db User","type":"string","description":"Primary Database User.","default":"phero2_app"},"db_password":{"title":"Db Password","type":"string","description":"Primary Database Password.","format":"password","writeOnly":true},"secret_secret":{"title":"Secret Secret","type":"string","description":"Set this to encrypt all database settings.","format":"password","writeOnly":true},"fs_root":{"title":"Fs Root","type":"string","description":"DEVELOPMENT OPTION: Root of the filesystem.","default":"/"},"worker_factor":{"title":"Worker Factor","type":"number","description":"The number of worker tasks per core.","default":1},"worker_max":{"title":"Worker Max","type":"integer","description":"The Maximum number of workers we allow to run.","default":2},"unix_bind":{"title":"Unix Bind","type":"string","description":"Internal websocket, should never need changing","default":"/tmp/ph2-mothership.sock"},"tcp_port":{"title":"Tcp Port","type":"integer","description":"Port to service request on. (Both Websocket and REST)","default":8080},"backlog":{"title":"Backlog","type":"integer","description":"Number of messages we will hold, waiting for available workers.","default":100},"log_level":{"allOf":[{"$ref":"#/components/schemas/ValidLogLevels"}],"description":"The lowest log level we will display.","default":"info"},"log_hostname":{"title":"Log Hostname","type":"string","description":"If set, overrides the local hostname in the logs."},"ipc_port":{"title":"Ipc Port","type":"integer","description":"Port we bind to, for multicast UDP messages used for IPC.","default":10000},"ipc_addr":{"title":"Ipc Addr","type":"string","description":"Multicast UDP address we use for IPC.","format":"IPv4"},"geoip_country":{"title":"Geoip Country","maxLength":2,"minLength":2,"type":"string","description":"DEV ONLY, if a router can not be geolocated it will get this country.","default":"CA"},"geoip_timezone":{"title":"Geoip Timezone","type":"string","description":"DEV ONLY, if a router can not be geolocated it will get this timezone.","default":"America/Toronto"},"geoip_region":{"title":"Geoip Region","type":"string","description":"DEV ONLY, if a router can not be geolocated it will get this region.","default":"Ontario"},"geoip_city":{"title":"Geoip City","type":"string","description":"DEV ONLY, if a router can not be geolocated it will get this city.","default":"Toronto"},"geoip_longitude":{"title":"Geoip Longitude","type":"number","description":"DEV ONLY, if a router can not be geolocated it will get this longitude.","default":43.7001},"geoip_latitude":{"title":"Geoip Latitude","type":"number","description":"DEV ONLY, if a router can not be geolocated it will get this latitude.","default":-79.4163}},"additionalProperties":false,"description":"Limited Environment Only Settings.\n\nAll other config comes from the database.\n\nThis uses pydantics ability to read and validate data from the environment\nto simplify implementation. ALL Environment variables are defined here.\nthere should be no use of os.getenv anywhere else in the code. (With the\nexception of logging which starts before configuration.)"},"EventBasedAddons":{"title":"EventBasedAddons","required":["id","quantity","unit_price","on_event","charge_once"],"type":"object","properties":{"id":{"title":"Id","type":"string"},"quantity":{"title":"Quantity","type":"integer"},"unit_price":{"title":"Unit Price","type":"integer"},"on_event":{"title":"On Event","type":"string"},"charge_once":{"title":"Charge Once","type":"boolean"},"quantity_in_decimal":{"title":"Quantity In Decimal","type":"string"},"unit_price_in_decimal":{"title":"Unit Price In Decimal","type":"string"}},"description":"Subscription Event Based Addons object."},"ExpChkResponse":{"title":"ExpChkResponse","required":["exp"],"type":"object","properties":{"exp":{"title":"Expiry Time","type":"integer","description":"\nThis is the absolute unix epoch time before which this token remains\nvalid.  After this time, this token will be considered invalid.\n"}},"description":"Response to a Token Expiry Check."},"FoundAdapterReply":{"title":"FoundAdapterReply","required":["id","adapter","since"],"type":"object","properties":{"id":{"title":"Id","type":"string","description":"Adapters Unique ID","format":"uuid"},"adapter":{"title":"Adapter","allOf":[{"$ref":"#/components/schemas/FoundAdapterType"}],"description":"The Details of the found adapter."},"since":{"title":"Since","type":"int","description":"The Datetime as unix epoch timestamp when the router was first discovered.","format":"UnixEpoch"}},"description":"Individual Found Adapter."},"FoundAdapterType":{"title":"FoundAdapterType","required":["mac","type","desc"],"type":"object","properties":{"mac":{"title":"Mac","type":"string","description":"Adapters Hardware MAC Address (WAN Port).","format":"EUI"},"type":{"title":"Type","type":"string","description":"Adapters Hardware Type."},"desc":{"title":"Desc","type":"string","description":"Description of this Hardware."}},"description":"Information about the found adapter."},"GeneralConfig":{"title":"GeneralConfig","type":"object","properties":{"mailchimp_key":{"title":"Mailchimp Key","type":"string","description":"Mailchimp API Key","format":"password","writeOnly":true},"bedtime_ends":{"title":"Bedtime Ends","type":"string","description":"Time that bedtime ends every day.","format":"time"},"streaming_change_interval":{"title":"Streaming Change Interval","type":"number","description":"How often we look for streaming database updates.","format":"time-delta"}},"description":"General API Configuration.\n\nThese are configs which only have one or two entries for any particular subsystem."},"GeoIPModel":{"title":"GeoIPModel","required":["ip_address","country","timezone","region","city","latitude","longitude"],"type":"object","properties":{"ip_address":{"title":"Ip Address","type":"string","description":"IP Address associated with this location.","format":"IPv4","example":"66.103.54.17"},"country":{"title":"Country","maxLength":2,"minLength":2,"type":"string","description":"ISO 3166 country Code","example":"TH"},"timezone":{"title":"Timezone","minLength":2,"type":"string","description":"IANA Timezone","example":"Asia/Bangkok"},"region":{"title":"Region","minLength":1,"type":"string","example":"Phuket"},"city":{"title":"City","type":"string","example":"Thalang"},"latitude":{"title":"Latitude","type":"number","example":18.5196},"longitude":{"title":"Longitude","type":"number","example":73.8554}},"description":"Full Model of a Geolocated IP Address."},"GlobalConfig":{"title":"GlobalConfig","type":"object","properties":{"database":{"title":"Database","allOf":[{"$ref":"#/components/schemas/GlobalDBConfig"}],"description":"Database Configuration"},"general":{"title":"General","allOf":[{"$ref":"#/components/schemas/GeneralConfig"}],"description":"General Configuration"},"data_usage":{"title":"Data Usage","allOf":[{"$ref":"#/components/schemas/DataUsageConfig"}],"description":"Configuration for the datausage storage and prediction."},"device_icons":{"title":"Device Icons","allOf":[{"$ref":"#/components/schemas/IconConfig"}],"description":"Path where device type icons can be retrieved."},"streaming_icons":{"title":"Streaming Icons","allOf":[{"$ref":"#/components/schemas/IconConfig"}],"description":"Path where streaming service icons can be retrieved."},"unsubscribed":{"title":"Unsubscribed","allOf":[{"$ref":"#/components/schemas/UnsubscribedConfig"}],"description":"The configuration to apply if the router is unsubscribed."},"chargebee":{"title":"Chargebee","allOf":[{"$ref":"#/components/schemas/ChargebeeConfig"}],"description":"Chargebee Configuration"},"notifications":{"title":"Notifications","allOf":[{"$ref":"#/components/schemas/NotificationConfig"}],"description":"Options which relate to the notification subsystem."},"auth":{"title":"Auth","allOf":[{"$ref":"#/components/schemas/AuthConfig"}],"description":"The authorization system configuration."},"vpn":{"title":"Vpn","allOf":[{"$ref":"#/components/schemas/VPNConfig"}],"description":"The VPN timing configurations."},"carousel":{"$ref":"#/components/schemas/CarouselConfig"}},"description":"The Master Global Configuration."},"GlobalDBConfig":{"title":"GlobalDBConfig","type":"object","properties":{"backend":{"$ref":"#/components/schemas/DBConfig"},"vpn":{"$ref":"#/components/schemas/DBConfig"},"streaming":{"$ref":"#/components/schemas/DBConfig"}},"description":"Configurations for each database."},"HTTPValidationError":{"title":"HTTPValidationError","type":"object","properties":{"detail":{"title":"Detail","type":"array","items":{"$ref":"#/components/schemas/ValidationError"}}}},"HUAData":{"title":"HUAData","required":["userAgent"],"type":"object","properties":{"userAgent":{"title":"Useragent","minLength":1,"type":"string","description":"\nThis is the host user agent sniffed from http traffic\nfrom the device. This data can not be obtained from https, only http\nconnections. As there may be more than one userAgent string detected\n, this is a list of the detected useragents.\n"}},"description":"HUA metadata information."},"IPResponse":{"title":"IPResponse","required":["ip"],"type":"object","properties":{"ip":{"title":"Ip","type":"string","description":"Clients External IP Address as seen by the backend.","format":"IPv4"}},"description":"External IP Address Response."},"IconConfig":{"title":"IconConfig","type":"object","properties":{"url":{"title":"Url","maxLength":65536,"minLength":1,"type":"string","description":"The base URL of the icons.","format":"uri"},"ext":{"title":"Ext","type":"string","description":"The default extension of all icons at this path.","default":"png"}},"description":"Icon Configuration."},"InitialCfg":{"title":"InitialCfg","required":["tstamp"],"type":"object","properties":{"message":{"title":"Message","type":"string","default":"initial cfg"},"tstamp":{"title":"tstamp","type":"integer","description":"\nThe request tstamp, to be echoed in any linked replies.\n","example":1592217870123},"tz":{"title":"Tz","type":"string"}},"description":"Initial Config Message."},"LinkEstablishedMessage":{"title":"LinkEstablishedMessage","required":["tstamp","country"],"type":"object","properties":{"message":{"title":"message","type":"string","description":"\nResponse from the router on successful websocket connection.\n","example":"link established"},"tstamp":{"title":"tstamp","type":"integer","description":"\nThe response timestamp, as taken from the original request in the case\nof a reply, OR the timestamp the state changed/message was queued on the\nadapter if sent asynchronously.  The timestamp when generated is to be\nthe current unix epoch (UTC) to milliseconds.\n","example":1592217870123},"disconnected":{"title":"Websocket disconnected?","type":"boolean","description":"Set to true if this is a websocket reconnection event.","default":false},"country":{"title":"country code","maxLength":3,"minLength":2,"type":"string","description":"ISO3166 Country code detected by the Router.","example":"CA"}},"description":"Link Established Message."},"LoginBody":{"title":"LoginBody","required":["id"],"type":"object","properties":{"id":{"title":"email-address","type":"string","description":"\nThe email address of the client.\n","format":"email","example":"example@email.com"},"pwd":{"title":"Password","maxLength":64,"minLength":8,"pattern":"^[ -~]*$","type":"string","description":"\nThe shared secret used to identify the client.\n","example":"my p455w0rd"}},"description":"Login Customer message body."},"NewcustomerBody":{"title":"NewcustomerBody","required":["email","callback"],"type":"object","properties":{"email":{"title":"Email Address","type":"string","description":"\nThe Email address the customer wishes to register as a new customer.\n","format":"email"},"callback":{"title":"The callback URL","maxLength":65536,"minLength":1,"type":"string","description":"\nLinked, in the email to the customer, for validation.\n\nThe Link in the users email will have two or three query parameters\nappended to this URL.\n\nOf the form:\n\n    ?verify=<verify token>\n    &exp=<token expiry time>\n    &pwd=<not present=true, true or false>\n","format":"uri"},"cheat":{"title":"Cheat","type":"boolean","description":"Never use or set this field."}},"description":"New Customer message body.","example":{"email":"example@email.com","callback":"ph2app://absolute.url"}},"NotificationConfig":{"title":"NotificationConfig","type":"object","properties":{"offline_delay":{"title":"Offline Delay","type":"number","description":"Delay before we send router offline notifications.","format":"time-delta"},"firebase_key":{"title":"Firebase Key","type":"string","description":"Firebase Notification API Key.","format":"password","writeOnly":true}},"description":"Notification Configuration."},"ParentAccountAccess":{"title":"ParentAccountAccess","required":["send_subscription_emails","send_invoice_emails","send_payment_emails"],"type":"object","properties":{"send_subscription_emails":{"title":"Send Subscription Emails","type":"boolean"},"send_invoice_emails":{"title":"Send Invoice Emails","type":"boolean"},"send_payment_emails":{"title":"Send Payment Emails","type":"boolean"},"portal_edit_child_subscriptions":{"title":"Portal Edit Child Subscriptions","type":"string"},"portal_download_child_invoices":{"title":"Portal Download Child Invoices","type":"string"}},"description":"Customer Parent Account Access object."},"PaymentMethod":{"title":"PaymentMethod","required":["gateway","status","reference_id","type"],"type":"object","properties":{"gateway":{"title":"Gateway","type":"string"},"status":{"title":"Status","type":"string"},"reference_id":{"title":"Reference Id","type":"string"},"type":{"title":"Type","type":"string"},"gateway_account_id":{"title":"Gateway Account Id","type":"string"}},"description":"Customer Payment Method object."},"ReferralInfo":{"title":"ReferralInfo","required":["account_id","campaign_id","post_purchase_widget_enabled"],"type":"object","properties":{"account_id":{"title":"Account Id","type":"string"},"campaign_id":{"title":"Campaign Id","type":"string"},"post_purchase_widget_enabled":{"title":"Post Purchase Widget Enabled","type":"boolean"},"referral_code":{"title":"Referral Code","type":"string"},"coupon_code":{"title":"Coupon Code","type":"string"},"referrer_id":{"title":"Referrer Id","type":"string"},"external_reference_id":{"title":"External Reference Id","type":"string"},"reward_status":{"title":"Reward Status","type":"string"},"referral_system":{"title":"Referral System","type":"string"},"external_campaign_id":{"title":"External Campaign Id","type":"string"},"friend_offer_type":{"title":"Friend Offer Type","type":"string"},"referrer_reward_type":{"title":"Referrer Reward Type","type":"string"},"notify_referral_system":{"title":"Notify Referral System","type":"string"},"destination_url":{"title":"Destination Url","type":"string"}},"description":"Subscription Referral Info object."},"ReferralUrls":{"title":"ReferralUrls","required":["referral_sharing_url","referral_campaign_id","referral_account_id","referral_system","created_at","updated_at"],"type":"object","properties":{"referral_sharing_url":{"title":"Referral Sharing Url","type":"string"},"referral_campaign_id":{"title":"Referral Campaign Id","type":"string"},"referral_account_id":{"title":"Referral Account Id","type":"string"},"referral_system":{"title":"Referral System","type":"string"},"created_at":{"title":"Created At","type":"string","format":"date-time"},"updated_at":{"title":"Updated At","type":"string","format":"date-time"},"external_customer_id":{"title":"External Customer Id","type":"string"},"referral_external_campaign_id":{"title":"Referral External Campaign Id","type":"string"}},"description":"Customer Referral URLs object."},"Relationship":{"title":"Relationship","required":["payment_owner_id","invoice_owner_id"],"type":"object","properties":{"payment_owner_id":{"title":"Payment Owner Id","type":"string"},"invoice_owner_id":{"title":"Invoice Owner Id","type":"string"},"parent_id":{"title":"Parent Id","type":"string"}},"description":"Customer Relationship object."},"Resetting":{"title":"Resetting","required":["tstamp"],"type":"object","properties":{"message":{"title":"Message","type":"string","description":"\nRouter is going to do a hardware reset.\n* Constant:  \"resetting\"\n","example":"resetting"},"tstamp":{"title":"tstamp","type":"integer","description":"\nThe response timestamp, as taken from the original request in the case\nof a reply, OR the timestamp the state changed/message was queued on the\nadapter if sent asynchronously.  The timestamp when generated is to be\nthe current unix epoch (UTC) to milliseconds.\n","example":1592217870123},"id":{"title":"id","minLength":1,"type":"string","description":"\nOptional, ID Field. This field is only sent if this message is a reply\nto a message received from the backend, AND that message included the ID\nField. In that case, it is included unchanged.\n","example":"eyJ0aGlzIjoiaXMiLCJhbiI6ImV4YW1wbGUiLCJpZCI6ZmllbGQifQ"},"in":{"title":"in","type":"integer","description":"\nThe number of seconds before the reset will occur. IF omitted, reset\nis imminent.\n","example":60}},"description":"Resetting message body."},"SMBData":{"title":"SMBData","required":["name"],"type":"object","properties":{"name":{"title":"Name","minLength":1,"type":"string","description":"\nIf the SMB/Netbios reported Name of the device can be\ndetermined, it is sent in this field.\n"},"domain":{"title":"Domain","minLength":1,"type":"string","description":"\nIf the SMB/Netbios reported Domain of the device can be\ndetermined, it is sent in this field.\n"}},"description":"SMB metadata information."},"SNMPData":{"title":"SNMPData","required":["sysoid"],"type":"object","properties":{"sysoid":{"title":"Sysoid","minLength":1,"type":"string","description":"\nThe System OID of the Device.\n"},"name":{"title":"Name","minLength":1,"type":"string","description":"\nThe name the device reports via snmp.\n"},"description":{"title":"Description","minLength":1,"type":"string","description":"\nThe description the device reports via snmp.\n"},"contact":{"title":"Contact","minLength":1,"type":"string","description":"\nThe contact the device reports via snmp.\n"},"location":{"title":"Location","minLength":1,"type":"string","description":"\nThe location the device reports via snmp.\n"}},"description":"SNMP metadata information."},"ServiceState":{"title":"ServiceState","required":["tstamp","services"],"type":"object","properties":{"message":{"title":"message","type":"string","description":"\nReport current state of a service on the Adapter.\n* Constant:  \"adapter-services-state\"\n","example":"adapter-services-state"},"tstamp":{"title":"tstamp","type":"integer","description":"\nThe response tstamp, as taken from the original command in\nthe case of a reply, OR the tstamp the state changed on the adapter if\nsent asynchronously.\n","example":1592217870123},"id":{"title":"id","minLength":1,"type":"string","description":"\nOptional, ID Field. The Adapter does not do any processing or from\nBusinessLogic.StdFieldNames import StdField\n\nverification of the ID field, if it is set, it must be returned\nverbatim in the paired reply.\n","example":"eyJ0aGlzIjoiaXMiLCJhbiI6ImV4YW1wbGUiLCJpZCI6ZmllbGQifQ"},"services":{"title":"services","minItems":1,"type":"array","items":{"$ref":"#/components/schemas/SingleServiceState"},"description":"\nThe final state of the service on the Adapter,\nafter processing the command, or as a result of an asynchronous change.\n"},"failed":{"title":"failed","type":"boolean","default":false},"error":{"title":"error","minLength":1,"type":"string"}},"description":"Adapter Services State message body."},"Services":{"title":"Services","enum":["vpn","adblocking","device-protection","internet-pause","youtube-restricted","safesearch","adult-block","online"],"description":"Services name mapping."},"SingleServiceState":{"title":"SingleServiceState","required":["service","state"],"type":"object","properties":{"service":{"title":"service name","allOf":[{"$ref":"#/components/schemas/Services"}],"description":"\nThe final state of the service on the Adapter,\nafter processing the command, or as a result of an asynchronous change.\n* service: The name of the service being configured.\n    * AdBlocking = Globally Enable/Disable AdBlocking\n    * StreamRelocation = Globally Enable/Disabe Stream Relocation\n    * UPNP = Enable a UPNP server to manage port forwarding for lan clients.\n    * WIFI = Globally Enable/Disbale the Wifi on the Router.\n    * WPS = Enable/Disable the WPS Button.\n    This does not enable the WPS function,\n    only allows the button to operate normally or not.\n    Active WPS State changes are reported using the WPS Status message\n    * Subscribed = True - Normal Operation.\n    False - Subscription captive portal mode.\n    In captive portal mode only whitelisted domains have access to the internet.\n    See Unsubscribed Whitelist message.\n","example":"adblocking"},"state":{"title":"state","type":"boolean","description":"\nThe state to set the service to.\n* true = Turn the service ON.\n* false = Turn the service OFF.\n","example":true}},"description":"A single service state change object."},"SpeedTest":{"title":"SpeedTest","required":["tstamp","address","ipv4","tx","rx","latency"],"type":"object","properties":{"message":{"title":"Message","type":"string","description":"\nReport of Speed Test Results.\n* Constant:  \"speedtest\"\n","example":"speedtest"},"tstamp":{"title":"tstamp","type":"integer","description":"\nThe response timestamp, as taken from the original request in the case\nof a reply, OR the timestamp the state changed/message was queued on the\nadapter if sent asynchronously.  The timestamp when generated is to be\nthe current unix epoch (UTC) to milliseconds.\n","example":1592217870123},"id":{"title":"id","minLength":1,"type":"string","description":"\nOptional, ID Field. The Adapter does not do any processing or\nverification of the ID field, if it is set, it must be returned\nverbatim in the paired reply.\n","example":"eyJ0aGlzIjoiaXMiLCJhbiI6ImV4YW1wbGUiLCJpZCI6ZmllbGQifQ"},"address":{"title":"address","anyOf":[{"type":"string","format":"IPv4","examples":["192.168.0.21"]},{"type":"string"}],"description":"\nThe IP of the website the speedtest was conducted against.\n","example":"8.8.8.8"},"ipv4":{"title":"ipv4","type":"string","description":"\nThe IP of the website the speedtest was conducted against.\n","format":"IPv4","example":"192.168.1.21"},"ipv6":{"title":"ipv6","type":"string","description":"\nThe Connections Internet IPv6 Address.\n","format":"IPv6","example":"fe80::dead:beef"},"vpn":{"title":"vpn","type":"string","description":"\nIF and ONLY IF this speedtest is through the VPN Tunnel, the VPN ID of\nthe VPN Server tested will be returned in the vpn field. The backend\nwill assume the speedtest result is for a WAN if this field is missing,\ntherefore it is optional and must only be included in VPN Speedtest\nresults. See [*VPN Server Connect*](#message-VPNConnect).\n"},"tx":{"title":"tx","allOf":[{"$ref":"#/components/schemas/TransferRate"}],"description":"\nThe result of the speedtest in the specified direction.\n"},"rx":{"title":"rx","allOf":[{"$ref":"#/components/schemas/TransferRate"}],"description":"\nThe result of the speedtest in the specified direction.\n"},"latency":{"title":"latency","minItems":10,"type":"array","items":{"type":"integer"},"description":"\nResults of latency test on speedtest server, for a minimum of 10 tests.\n","example":[10,99,-1,4,9,55,60,80,90,50]}},"description":"Speedtest message body."},"Status":{"title":"Status","enum":["activated","blocked","completed"],"description":"Possible WPS statuses."},"Statuses":{"title":"Statuses","enum":["test-connecting","testing","test-failed","connecting","connected","failed","reconnecting","disconnected"],"description":"Possible VPN Statuses."},"Subscription":{"title":"Subscription","required":["id","currency_code","plan_id","plan_quantity","customer_id","status","deleted","object"],"type":"object","properties":{"id":{"title":"Id","type":"string"},"currency_code":{"title":"Currency Code","type":"string"},"plan_id":{"title":"Plan Id","type":"string"},"plan_quantity":{"title":"Plan Quantity","type":"integer"},"customer_id":{"title":"Customer Id","type":"string"},"status":{"title":"Status","type":"string"},"deleted":{"title":"Deleted","type":"boolean"},"object":{"title":"Object","type":"string"},"has_scheduled_advance_invoices":{"title":"Has Scheduled Advance Invoices","type":"boolean","default":false},"has_scheduled_changes":{"title":"Has Scheduled Changes","type":"boolean","default":false},"plan_unit_price":{"title":"Plan Unit Price","type":"integer"},"setup_fee":{"title":"Setup Fee","type":"integer"},"billing_period":{"title":"Billing Period","type":"integer"},"billing_period_unit":{"title":"Billing Period Unit","type":"string"},"start_date":{"title":"Start Date","type":"string","format":"date-time"},"trial_end":{"title":"Trial End","type":"string","format":"date-time"},"remaining_billing_cycles":{"title":"Remaining Billing Cycles","type":"integer"},"po_number":{"title":"Po Number","type":"string"},"auto_collection":{"title":"Auto Collection","type":"string"},"plan_amount":{"title":"Plan Amount","type":"integer"},"plan_free_quantity":{"title":"Plan Free Quantity","type":"integer"},"trial_start":{"title":"Trial Start","type":"string","format":"date-time"},"current_term_start":{"title":"Current Term Start","type":"string","format":"date-time"},"current_term_end":{"title":"Current Term End","type":"string","format":"date-time"},"next_billing_at":{"title":"Next Billing At","type":"string","format":"date-time"},"created_at":{"title":"Created At","type":"string","format":"date-time"},"started_at":{"title":"Started At","type":"string","format":"date-time"},"activated_at":{"title":"Activated At","type":"string","format":"date-time"},"gift_id":{"title":"Gift Id","type":"string"},"contract_term_billing_cycle_on_renewal":{"title":"Contract Term Billing Cycle On Renewal","type":"integer"},"override_relationship":{"title":"Override Relationship","type":"boolean"},"pause_date":{"title":"Pause Date","type":"string","format":"date-time"},"resume_date":{"title":"Resume Date","type":"string","format":"date-time"},"cancelled_at":{"title":"Cancelled At","type":"string","format":"date-time"},"cancel_reason":{"title":"Cancel Reason","type":"string"},"affiliate_token":{"title":"Affiliate Token","type":"string"},"created_from_ip":{"title":"Created From Ip","type":"string","format":"IPv4"},"resource_version":{"title":"Resource Version","type":"integer"},"updated_at":{"title":"Updated At","type":"string","format":"date-time"},"payment_source_id":{"title":"Payment Source Id","type":"string"},"plan_free_quantity_in_decimal":{"title":"Plan Free Quantity In Decimal","type":"string"},"plan_quantity_in_decimal":{"title":"Plan Quantity In Decimal","type":"string"},"plan_unit_price_in_decimal":{"title":"Plan Unit Price In Decimal","type":"string"},"plan_amount_in_decimal":{"title":"Plan Amount In Decimal","type":"string"},"offline_payment_method":{"title":"Offline Payment Method","type":"string"},"due_invoices_count":{"title":"Due Invoices Count","type":"integer"},"due_since":{"title":"Due Since","type":"string","format":"date-time"},"total_dues":{"title":"Total Dues","type":"integer"},"mrr":{"title":"Mrr","type":"integer"},"exchange_rate":{"title":"Exchange Rate","type":"number"},"base_currency_code":{"title":"Base Currency Code","type":"string"},"invoice_notes":{"title":"Invoice Notes","type":"string"},"cancel_reason_code":{"title":"Cancel Reason Code","type":"string"},"free_period":{"title":"Free Period","type":"integer"},"free_period_unit":{"title":"Free Period Unit","type":"string"},"addons":{"title":"Addons","type":"array","items":{"$ref":"#/components/schemas/AddOns"}},"event_based_addons":{"title":"Event Based Addons","type":"array","items":{"$ref":"#/components/schemas/EventBasedAddons"}},"charged_event_based_addons":{"title":"Charged Event Based Addons","type":"array","items":{"$ref":"#/components/schemas/ChargedEventBasedAddons"}},"shipping_address":{"$ref":"#/components/schemas/Address"},"referral_info":{"$ref":"#/components/schemas/ReferralInfo"},"contract_term":{"$ref":"#/components/schemas/ContractTerm"}},"description":"Class for holding subscription information."},"TransferRate":{"title":"TransferRate","required":["txfr","ms"],"type":"object","properties":{"txfr":{"title":"txfr","type":"integer","description":"\nThe total number of bytes transferred.\n","example":200000},"ms":{"title":"ms","type":"integer","description":"\nThe total number of milliseconds the transfer took.\n","example":130}},"description":"A Transfer rate, either sent or received."},"UPNPData":{"title":"UPNPData","required":["deviceType"],"type":"object","properties":{"deviceType":{"title":"Devicetype","minLength":1,"type":"string","description":"\nThe Device type reported by the UPNP Data of this\ninternal device.\neg: urn:schemas-upnp-org:device:InternetGatewayDevice:1\n","example":"urn:schemas-upnp-org:device:InternetGatewayDevice:1"},"manufacturer":{"title":"Manufacturer","minLength":1,"type":"string","description":"\nThe Device manufacturer reported by the UPNP\nData of this internal device. eg: Samsung\n","example":"Samsung"},"modelName":{"title":"Modelname","minLength":1,"type":"string","description":"\nThe Model Name reported by the UPNP Data of this\ninternal device. eg: QN82Q80RAFXZA\n","example":"QN82Q80RAFXZA"},"friendlyName":{"title":"Friendlyname","minLength":1,"type":"string","description":"\nThe Friendly Name reported by the UPNP Data of this\ninternal device. eg: 80\" 4k QLED Flatscreen TV\n","example":"QLED Flatscreen TV"},"serviceTypeList":{"title":"Servicetypelist","minItems":1,"type":"array","items":{"type":"string","minLength":1},"description":"\nThe List of service types reported by the UPNP\nData of this internal device.\neg: [\"urn:schemas-upnp-org:service:Layer3Forwarding:1\"]\n    * '0': Individual Service Type Entry.\n","example":["urn:schemas-upnp-org:service:Layer3Forwarding:1"]}},"description":"UPNP metadata information."},"UnsubscribedConfig":{"title":"UnsubscribedConfig","type":"object","properties":{"whitelist":{"title":"Whitelist","type":"array","items":{"anyOf":[{"type":"string","format":"regex","examples":["^[Rr]ege.*$"]},{"type":"string","minLength":1,"maxLength":65536,"format":"uri"}]},"description":"The list of url's which may be accessed by an unsubscribed router."},"proxy_url":{"title":"Proxy Url","maxLength":65536,"minLength":1,"type":"string","description":"Proxy to use if router is unsubscribed.","format":"uri"}},"description":"Icon Configuration."},"UnsubscribedWhitelist":{"title":"UnsubscribedWhitelist","required":["tstamp"],"type":"object","properties":{"message":{"title":"Message","type":"string","default":"unsubscribed-whitelist"},"tstamp":{"title":"tstamp","type":"integer","description":"\nThe request tstamp, to be echoed in any linked replies.\n","example":1592217870123},"whitelist":{"title":"Whitelist","type":"array","items":{"type":"string","format":"regex","examples":["^[Rr]ege.*$"]},"description":"\nA list of regex url domains which, if matched, are allowed to be\naccessed even when the router is unsubscribed. All other HTTP traffic is\nrouted to a url specified in the proxy field.\n\nI addition, all HTTPS traffic not to a whitelisted domain is simply blocked.\n\nThis functionality is ONLY active if\nthe [*Adapter Services*](#message-AdapterServices) \"Subscribed\" service state is False.\n"},"proxy":{"title":"Proxy","type":"string","description":"The URL to route all non-whitelisted traffic to."}},"description":"unsubscribed whitelist message."},"VPNConfig":{"title":"VPNConfig","type":"object","properties":{"borrowed_time":{"title":"Borrowed Time","type":"number","description":"Time that bedtime ends every day.","format":"time-delta"},"speedtest_reportable":{"title":"Speedtest Reportable","type":"number","description":"Time that bedtime ends every day.","format":"time-delta"}},"description":"VPN Timing configurations."},"VPNReconnect":{"title":"VPNReconnect","required":["tstamp"],"type":"object","properties":{"message":{"title":"Message","type":"string","description":"\nReconnect to a listed VPN Server.\n* Constant:  \"vpn-reconnect\"\n","example":"vpn-reconnect"},"tstamp":{"title":"tstamp","type":"integer","description":"\nThe response timestamp, as taken from the original request in the case\nof a reply, OR the timestamp the state changed/message was queued on the\nadapter if sent asynchronously.  The timestamp when generated is to be\nthe current unix epoch (UTC) to milliseconds.\n","example":1592217870123},"id":{"title":"id","minLength":1,"type":"string","description":"\nOptional, ID Field. The Adapter does not do any processing or\nverification of the ID field, if it is set, it must be returned\nverbatim in the paired reply.\n","example":"eyJ0aGlzIjoiaXMiLCJhbiI6ImV4YW1wbGUiLCJpZCI6ZmllbGQifQ"}},"description":"VPN Reconnect message body."},"VPNStatus":{"title":"VPNStatus","required":["tstamp","status","server"],"type":"object","properties":{"message":{"title":"Message","type":"string","description":"\nReport VPN Connection Status.\n* Constant:  \"vpn-status\"\n","example":"vpn-status"},"tstamp":{"title":"tstamp","type":"integer","description":"\nThe response timestamp, as taken from the original request in the case\nof a reply, OR the timestamp the state changed/message was queued on the\nadapter if sent asynchronously.  The timestamp when generated is to be\nthe current unix epoch (UTC) to milliseconds.\n","example":1592217870123},"id":{"title":"id","type":"string","description":"\nOptional, ID Field. The Adapter does not do any processing or\nverification of the ID field, if it is set, it must be returned\nverbatim in the paired reply.\n","example":"eyJ0aGlzIjoiaXMiLCJhbiI6ImV4YW1wbGUiLCJpZCI6ZmllbGQifQ"},"status":{"title":"status","allOf":[{"$ref":"#/components/schemas/Statuses"}],"description":"\nThe current status of the VPN process.\n* test-connecting = Connecting to a VPN server to test.\n* testing = Test connection to VPN succeeded and test started. Test\nresults will be sent in {Xref.speedtest_result}.\n* test-failed = Either the connection couldn't be established to\ntest, or the test has failed to execute.\n* connecting = Connecting the VPN tunnel for general use.\n* connected = The connection to the VPN is established and routing is\noperational.\n* failed = The vpn server failed to connect or the link broke.\nAfter this call the router may no longer use the credentials presented\nin {Xref.vpn_server_connect} for the server.\n* reconnecting = The VPN server was running and failed, trying to\nreconnect. This status is sent instead of the connecting status when a\nvpn link was established, but dropped and we are attempting to\nre-establish the connection.\n* disconnected = The last possible server was tested and failed, giving\nup trying to enable VPN. server should not be present, as no server is\nbeing accessed in this state.\n","example":"test-connecting"},"server":{"title":"server","type":"string","description":"\nThe server ID, sent for every status except disconnected\n","example":"2"},"description":{"title":"description","type":"string","description":"\nString description providing extra information about a\nstate. It is valid for the same state to be sent multiple times with\nchanging desc_string.\nFor example testing multiple times for the same URL with a running\ncommentary about the test as it executes.\n","example":"Test connecting to the server."}},"description":"VPN Status message body."},"ValidLogLevels":{"title":"ValidLogLevels","enum":["info","debug","warning"],"type":"string","description":"The valid logging levels."},"ValidStages":{"title":"ValidStages","enum":["dev","qa","prod"],"type":"string","description":"The valid deployment stages."},"ValidationError":{"title":"ValidationError","required":["loc","msg","type"],"type":"object","properties":{"loc":{"title":"Location","type":"array","items":{"type":"string"}},"msg":{"title":"Message","type":"string"},"type":{"title":"Error Type","type":"string"}}},"WPSStatus":{"title":"WPSStatus","required":["tstamp","status"],"type":"object","properties":{"message":{"title":"Message","type":"string","description":"\nReport WPS Function Status.\n* Constant: \"wps-status\"\n","example":"wps-status"},"tstamp":{"title":"tstamp","type":"integer","description":"\nThe response timestamp, as taken from the original request in the case\nof a reply, OR the timestamp the state changed/message was queued on the\nadapter if sent asynchronously.  The timestamp when generated is to be\nthe current unix epoch (UTC) to milliseconds.\n","example":1592217870123},"id":{"title":"id","minLength":1,"type":"string","description":"\nOptional, ID Field. The Adapter does not do any processing or\nverification of the ID field, if it is set, it must be returned\nverbatim in the paired reply.\n","example":"eyJ0aGlzIjoiaXMiLCJhbiI6ImV4YW1wbGUiLCJpZCI6ZmllbGQifQ"},"status":{"title":"status","allOf":[{"$ref":"#/components/schemas/Status"}],"description":"\nThe current status of the WPS function.\n* activated = The WPS function is activated. The optional duration\nfield defines the number of seconds the WPS mode will be active.\n* blocked = The WPS function activation button was pressed, but the\nfunction is blocked by configuration. duration is omitted with this\nstatus.\n* completed = The WPS function is no longer activated. duration is\nomitted with this status.\n","example":"activated"},"duration":{"title":"Duration","type":"integer","description":"\nNumber of seconds WPS will be activated on the router.\n","example":30}},"description":"WPS Status message body."},"WS_ROUTER__msg__adapter_services_state__Services":{"title":"Services","enum":["vpn","adblocking","streamrelocation","malware","wps","upnp"],"description":"Services name mapping."},"WS_ROUTER__msg__device_state_changed__Services":{"title":"Services","enum":["vpn","adblocking","device-protection","internet-pause","youtube-restricted","safesearch","adult-block","online"],"description":"Services name mapping."},"WifiBand":{"title":"WifiBand","enum":["2.4Ghz","5Ghz","6Ghz"],"description":"Possible wifi radio bands."},"WifiStatus":{"title":"WifiStatus","required":["tstamp","default"],"type":"object","properties":{"message":{"title":"Message","type":"string","description":"\nThe current WIFI Radio status.\n* Constant: \"wifi-status\"\n","example":"wifi-status"},"tstamp":{"title":"tstamp","type":"integer","description":"\nThe response timestamp, as taken from the original request in the case\nof a reply, OR the timestamp the state changed/message was queued on the\nadapter if sent asynchronously.  The timestamp when generated is to be\nthe current unix epoch (UTC) to milliseconds.\n","example":1592217870123},"id":{"title":"id","minLength":1,"type":"string","description":"\nOptional, ID Field. The Adapter does not do any processing or\nverification of the ID field, if it is set, it must be returned\nverbatim in the paired reply.\n","example":"eyJ0aGlzIjoiaXMiLCJhbiI6ImV4YW1wbGUiLCJpZCI6ZmllbGQifQ"},"default":{"title":"default","allOf":[{"$ref":"#/components/schemas/BaseWifiConfig"}],"description":"\nDefault Wifi Configuration for all radios.\n"},"custom":{"title":"custom","type":"array","items":{"$ref":"#/components/schemas/BaseWifiConfig"},"description":"\nA list of customizations to apply per radio.\n"}},"description":"Wifi Status message body."}},"securitySchemes":{"HTTPAppBearerToken":{"type":"http","description":"\n# Application Bearer Tokens\n\nApplication Bearer Tokens are distributed to each application and uniquely\nidentify it and give it authority to access a particular backend.\n\nThey are similar to and should be treated like an API Key.  They are only\nused in messages in authorization before a client has successfully\nidentified themselves.\n","scheme":"bearer"},"HTTPUserBearerToken":{"type":"http","scheme":"bearer"},"HTTPBasicUserPass":{"type":"http","scheme":"basic"}}},"tags":[{"name":"Admin Management","description":"Operations related to Admin Management."},{"name":"Account Management","description":"Operations related to Account Creation and Management."},{"name":"Client Management","description":"Operations related to the Client."},{"name":"Adapter Management","description":"Operations related to Adapter Management."},{"name":"Profile Management","description":"Operations related to Profile Management."},{"name":"Device Management","description":"Operations related to Device Management."},{"name":"Streaming Management","description":"Operations related to Streaming Services and Relocation."},{"name":"Chargebee Callback","description":"Chargebee Callbacks to update subscriptions/accounts."},{"name":"Websocket Messages","description":"Websocket message bodies."},{"name":"Websocket Management Messages","description":"Websocket Internal Control messages."},{"name":"Browser Extension","description":"Browser Extension API Calls (http only)."},{"name":"Local Tasks","description":"Local Only Tasks."}]}